{"version":3,"sources":["widgets/Base.tsx","lib/Async.ts","widgets/components/ProviderSelect.tsx","axios.ts","service.ts","widgets/components/RequesterForm.tsx","widgets/Prepare.tsx","utils.ts","widgets/TaskRunSummary.tsx","widgets/components/FormField.tsx","widgets/components/OptionsForm.tsx","widgets/components/BlueprintSelect.tsx","widgets/components/ArchitectSelect.tsx","widgets/components/RequesterSelect.tsx","lib/toaster.ts","widgets/Launch.tsx","widgets/Review.tsx","widgets/GridReview.js","App.tsx","index.tsx"],"names":["children","heading","badge","elevation","Elevation","THREE","className","style","marginBottom","undefined","isEmpty","require","createAsync","Async","info","onLoading","onError","onData","onEmptyData","checkIfEmptyFn","data","loading","error","baseProps","refetch","axiosInfo","response","dataToCheckIfEmpty","ProviderSelect","Select","ofType","renderProviderItem","requesterType","handleClick","modifiers","query","matchesPredicate","text","active","disabled","key","onClick","highlightText","ProviderSelectComponent","onUpdate","React","useState","selected","setSelected","items","itemRenderer","onItemSelect","activeItem","icon","rightIcon","escapeRegExpChars","replace","lastIndex","words","split","filter","word","length","map","regexp","RegExp","join","tokens","match","exec","before","slice","push","rest","axios","Axios","create","baseURL","interceptors","request","use","config","delayed","Promise","resolve","setTimeout","configure","SKIP_FIELD","launchTask","transformedPayload","transformed","Object","entries","value","option_string","namespace","arg_name","opt_string","toString","arg","console","table","fromEntries","mapLaunchDataToExpectedPayload","post","reviewActions","accept","id","rejectAndPay","softBlock","hardBlock","ProviderParamsAsync","LaunchOptionsAsync","RequesterForm","onFinish","requesterTypes","provider_types","selectedProvider","setSelectedProvider","requesterTypesAsync","useAxios","url","margin","log","details","desc","initialValues","onSubmit","values","provider","payload","results","args","param","then","handleChange","errors","touched","handleBlur","handleSubmit","isSubmitting","label","help","labelInfo","labelFor","placeholder","name","onBlur","onChange","RequesterFormWithData","allRequestersAsync","plural","numInstalledTasks","requesterDrawerOpen","setRequesterDrawerOpen","requesterAsync","Base","color","Colors","RED3","requesters","ORANGE3","onClose","title","autoFocus","canEscapeKeyClose","enforceFocus","hasBackdrop","isOpen","position","Position","BOTTOM","size","usePortal","Classes","DRAWER_BODY","backgroundColor","LIGHT_GRAY4","DIALOG_BODY","r","requester_id","interactive","registered","GREEN4","GRAY4","provider_type","display","marginRight","cx","requester_name","marginTop","window","location","reload","TaskRunSummary","run","task_name","moment","utc","start_time","fromNow","params","fontSize","task_status","created","launched","completed","accepted","mixed","rejected","assigned","FormField","prefix","field","dest","dispatch","useEffect","type","default","defaultChecked","e","target","checked","defaultValue","OptionsForm","options","flatMap","opt","forEach","BlueprintSelect","BlueprintParamsAsync","renderBlueprintItem","blueprint","rank","BlueprintSelectComponent","paramsInfo","ArchitectParamsAsync","ArchitectSelect","arch","architect","RequesterSelect","renderRequesterItem","requester","RequesterSelectComponent","toaster","Toaster","BOTTOM_LEFT","LaunchInfoAsync","RequesterInfoAsync","DefaultTaskInfoAsync","runningTasksAsync","task_runs","task_run_id","textAlign","LaunchForm","openForm","setOpenForm","launchInfo","requesterInfo","defaultTaskInfo","useReducer","state","keys","startsWith","reduce","obj","addToParams","canOutsideClickClose","RIGHT","blueprint_types","architect_types","validated","allTaskParamsFilled","allFilled","dismiss","show","message","intent","Intent","SUCCESS","timeout","catch","NONE","DANGER","large","reviewAsync","to","textDecoration","GridReviewAsync","GridReview","useTable","units","columns","Header","accessor","Cell","cell","maxWidth","unitId","row","unit_id","content","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","render","i","getRowProps","cells","getCellProps","GridReviewWithData","gridReviewAsync","App","top","exact","path","Prepare","Launch","Review","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.6e109e52.chunk.js","sourcesContent":["import React from \"react\";\nimport { Card, Elevation } from \"@blueprintjs/core\";\n\ninterface BaseProps {\n  heading: React.ReactElement;\n  badge: string | undefined;\n}\n\nexport default (function BaseWidget({ children, heading, badge }) {\n  return (\n    <Card elevation={Elevation.THREE} className=\"widget\">\n      <h4 className=\"bp3-heading\" style={{ marginBottom: 15 }}>\n        {badge !== undefined && (\n          <span className=\"bp3-tag bp3-large bp3-minimal bp3-round step-badge\">\n            {badge}\n          </span>\n        )}\n        {heading}\n      </h4>\n      {children}\n    </Card>\n  );\n} as React.FC<BaseProps>);\n","import React from \"react\";\nimport { AxiosPromise, AxiosRequestConfig } from \"axios\";\nimport { ResponseValues, RefetchOptions } from \"axios-hooks\";\nconst isEmpty = require(\"lodash.isempty\");\n\ntype AxiosInfo<T> =\n  | [\n      ResponseValues<T>,\n      (config?: AxiosRequestConfig, options?: RefetchOptions) => AxiosPromise<T>\n    ]\n  | [ResponseValues<T>];\n\ntype BaseAsyncProps<T> = {\n  axiosInfo: AxiosInfo<T>;\n  refetch: Function;\n};\n\ntype AsyncProps<T> = {\n  info: AxiosInfo<T>;\n  onLoading: React.FC<BaseAsyncProps<T>>;\n  onError: React.FC<{ error: any } & BaseAsyncProps<T>>;\n  onData: React.FC<{ data: T } & BaseAsyncProps<T>>;\n  onEmptyData?: React.FC<{ data: T } & BaseAsyncProps<T>>;\n  checkIfEmptyFn?: (data: T) => any;\n};\n\nexport type AsyncComponent<T = any> = React.FC<AsyncProps<T>>;\n\nexport function createAsync<T>() {\n  return Async as AsyncComponent<T>;\n}\n\nconst Async: AsyncComponent = ({\n  info,\n  onLoading,\n  onError,\n  onData,\n  onEmptyData,\n  checkIfEmptyFn: checkIfEmptyFn\n}) => {\n  const [{ data, loading, error }, refetch = () => {}] = info;\n\n  const baseProps: BaseAsyncProps<any> = { refetch, axiosInfo: info };\n\n  if (loading) return onLoading({ ...baseProps });\n  else if (error) return onError({ error: error.response?.data, ...baseProps });\n\n  const dataToCheckIfEmpty =\n    checkIfEmptyFn !== undefined ? checkIfEmptyFn(data) : data;\n  const dataIsEmpty = isEmpty(dataToCheckIfEmpty);\n\n  if (dataIsEmpty && onEmptyData !== undefined)\n    return onEmptyData({ data, ...baseProps });\n  else return onData({ data, ...baseProps });\n};\n\nexport default Async;\n\nexport function mockRequest<T>(\n  mockData: T,\n  error: any = undefined,\n  loading: boolean = false\n) {\n  const request = {\n    data: mockData,\n    loading,\n    error: error && { response: { data: error } }\n  } as ResponseValues<T>;\n  return [request, () => {}] as [ResponseValues<T>, any];\n}\n","import React from \"react\";\nimport { Select, ItemRenderer } from \"@blueprintjs/select\";\nimport { Button, MenuItem } from \"@blueprintjs/core\";\nimport { Provider } from \"../../models\";\n\ntype IProvider = Provider;\n\nconst ProviderSelect = Select.ofType<IProvider>();\n\nconst renderProviderItem: ItemRenderer<IProvider> = (\n  requesterType,\n  { handleClick, modifiers, query }\n) => {\n  if (!modifiers.matchesPredicate) {\n    return null;\n  }\n  const text = `${requesterType}`;\n  return (\n    <MenuItem\n      active={modifiers.active}\n      disabled={modifiers.disabled}\n      key={requesterType}\n      onClick={handleClick}\n      text={highlightText(text, query)}\n    />\n  );\n};\n\nexport default function ProviderSelectComponent<T>({\n  data,\n  onUpdate\n}: {\n  data: IProvider[];\n  onUpdate: Function;\n}) {\n  const [selected, setSelected] = React.useState<IProvider | null>(null);\n  return (\n    <div>\n      <ProviderSelect\n        items={data}\n        itemRenderer={renderProviderItem}\n        onItemSelect={(requesterType: IProvider) => {\n          onUpdate(requesterType);\n          setSelected(requesterType);\n        }}\n        activeItem={selected}\n      >\n        <Button icon=\"map\" rightIcon=\"caret-down\">\n          {selected ? selected : \"Pick a requester type...\"}\n        </Button>\n      </ProviderSelect>\n    </div>\n  );\n}\n\nfunction escapeRegExpChars(text: string) {\n  return text.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n}\n\nfunction highlightText(text: string, query: string) {\n  let lastIndex = 0;\n  const words = query\n    .split(/\\s+/)\n    .filter(word => word.length > 0)\n    .map(escapeRegExpChars);\n  if (words.length === 0) {\n    return [text];\n  }\n  const regexp = new RegExp(words.join(\"|\"), \"gi\");\n  const tokens: React.ReactNode[] = [];\n  while (true) {\n    const match = regexp.exec(text);\n    if (!match) {\n      break;\n    }\n    const length = match[0].length;\n    const before = text.slice(lastIndex, regexp.lastIndex - length);\n    if (before.length > 0) {\n      tokens.push(before);\n    }\n    lastIndex = regexp.lastIndex;\n    tokens.push(<strong key={lastIndex}>{match[0]}</strong>);\n  }\n  const rest = text.slice(lastIndex);\n  if (rest.length > 0) {\n    tokens.push(rest);\n  }\n  return tokens;\n}\n","import { configure } from \"axios-hooks\";\nimport Axios, { AxiosRequestConfig } from \"axios\";\n\nconst axios = Axios.create({\n  baseURL: \"http://localhost:5000/api/v1/\"\n});\n\ndeclare module \"axios\" {\n  export interface AxiosRequestConfig {\n    delayed?: boolean | number;\n  }\n}\n\n// type CustomAxiosRequestConfig = AxiosRequestConfig & { delayed?: boolean };\n\naxios.interceptors.request.use(config => {\n  if (config.delayed) {\n    return new Promise(resolve =>\n      setTimeout(\n        () => resolve(config),\n        config.delayed === true\n          ? 600\n          : config.delayed === false\n          ? 0\n          : config.delayed\n      )\n    );\n  }\n  return config;\n});\n\nconfigure({ axios });\n\nexport default axios;\n","import axios from \"./axios\";\nimport { AxiosPromise } from \"axios\";\n\n// TEMP HACK NULL_FIELDS: some static task fields have a default value of null\n// while null is also an unacceptable value, we detect explict exceptions for now\n// and handle the process of skipping these fields\nconst SKIP_FIELD = null;\n\nexport function launchTask(data: any): AxiosPromise<any> {\n  const transformedPayload = mapLaunchDataToExpectedPayload(data);\n  return axios.post(\"task_runs/launch\", transformedPayload);\n}\n\nexport function createRequester(\n  provider: string,\n  payload: any\n): AxiosPromise<any> {\n  return axios.post(`requester/${provider}/register`, payload);\n}\n\nfunction mapLaunchDataToExpectedPayload(data: any) {\n  // We expect to receive a payload of the following format that\n  // will then transform to suit the API's expectations:\n  //\n  // {\n  //    \"blueprint\": \"name\",\n  //    \"architect\": \"name\",\n  //    \"requester\": \"name\",\n  //    \"bp|<arg-name>|<--arg-flag>\": \"value\"\n  // }\n  const transformed = Object.entries(data)\n    .map(([key, value]) => {\n      if (key === \"blueprint\") {\n        return [\n          \"blueprint_type\",\n          {\n            option_string: \"--blueprint-type\",\n            value: value\n          }\n        ];\n      } else if (key === \"architect\") {\n        return [\n          \"architect_type\",\n          {\n            option_string: \"--architect-type\",\n            value: value\n          }\n        ];\n      } else if (key === \"requester\") {\n        return [\n          \"requester_name\",\n          {\n            option_string: \"--requester-name\",\n            value: value\n          }\n        ];\n      } else {\n        const [namespace, arg_name, opt_string] = key.split(\"|\");\n\n        /* TEMP HACK NULL_FIELDS - handle in a more sophisticated fashion once optional or required flags are added */\n        if (namespace === \"bp\" && value === null) {\n          return [SKIP_FIELD, SKIP_FIELD];\n        }\n\n        return [\n          arg_name,\n          {\n            option_string: opt_string,\n            value: value === null ? null : (value as any).toString()\n          }\n        ];\n      }\n    })\n    .filter(([arg, data]) => arg !== SKIP_FIELD);\n  /* ^ TEMP HACK NULL_FIELDS filter out empty fields */\n\n  console.table(Object.fromEntries(transformed));\n  return Object.fromEntries(transformed);\n}\n\nexport const reviewActions = {\n  accept: function(id: string) {\n    return axios.post(`unit/${id}/accept`);\n  },\n  rejectAndPay: function(id: number) {\n    return axios.post(`unit/${id}/reject`);\n  },\n  softBlock: function(id: number) {\n    return axios.post(`unit/${id}/softBlock`);\n  },\n  hardBlock: function(id: number) {\n    return axios.post(`unit/${id}/hardBlock`);\n  }\n};\n","import React from \"react\";\nimport { Formik } from \"formik\";\nimport { InputGroup, FormGroup, Button } from \"@blueprintjs/core\";\nimport useAxios from \"axios-hooks\";\nimport { createAsync } from \"../../lib/Async\";\nimport ProviderSelect from \"./ProviderSelect\";\nimport { createRequester } from \"../../service\";\nimport { ParamDetails, LaunchOptions } from \"../../models\";\n\ntype Provider = any;\ntype ProviderParams = any;\n\nconst ProviderParamsAsync = createAsync<ProviderParams>();\nconst LaunchOptionsAsync = createAsync<LaunchOptions>();\n\nfunction RequesterForm({\n  data,\n  onFinish\n}: {\n  data: LaunchOptions;\n  onFinish: Function;\n}) {\n  const requesterTypes = data.provider_types;\n\n  const [selectedProvider, setSelectedProvider] = React.useState<string | null>(\n    null\n  );\n\n  const requesterTypesAsync = useAxios<Provider>({\n    url: `/requester/${selectedProvider}/options`\n  });\n\n  return (\n    <div style={{ margin: \"40px 0 20px\" }}>\n      <h3 className=\"bp3-heading\">Add a New Requester:</h3>\n\n      <ProviderSelect\n        data={requesterTypes}\n        onUpdate={(requesterType: string) => {\n          console.log({ requesterType });\n          setSelectedProvider(requesterType);\n        }}\n      />\n      {selectedProvider && (\n        <ProviderParamsAsync\n          info={requesterTypesAsync}\n          onLoading={() => <span>Loading...</span>}\n          onError={() => <span>Error</span>}\n          onData={({ data: [details] }) => (\n            <div style={{ margin: \"30px 0 20px\" }}>\n              <div\n                className=\"bp3-callout bp3-icon-info-sign bp3-intent-primary\"\n                style={{ margin: \"10px 0 30px\" }}\n              >\n                <h4 className=\"bp3-heading\">Details</h4>\n\n                <p className=\"bp3-text bp3-running-text\">{details.desc}</p>\n              </div>\n              <Formik\n                initialValues={{}}\n                onSubmit={(values: Record<string, string>) => {\n                  const results = Object.fromEntries(\n                    Object.entries<ParamDetails>(details.args).map(\n                      ([param, paramDetails]) => {\n                        return [\n                          param,\n                          {\n                            option_string: paramDetails.option_string,\n                            value: values[param]\n                          }\n                        ];\n                      }\n                    )\n                  );\n                  createRequester(selectedProvider, results).then(() => {\n                    onFinish();\n                  });\n                }}\n              >\n                {({\n                  values,\n                  errors,\n                  touched,\n                  handleChange,\n                  handleBlur,\n                  handleSubmit,\n                  isSubmitting\n                }) => (\n                  <div>\n                    {Object.entries(details.args).map(\n                      ([param, details]: [any, any]) => {\n                        return (\n                          <FormGroup\n                            key={param}\n                            label={details.help}\n                            labelInfo={details.option_string}\n                            labelFor=\"test\"\n                          >\n                            <InputGroup\n                              id=\"requester\"\n                              placeholder={\"\"}\n                              name={param}\n                              onBlur={handleBlur}\n                              value={(values as any)[param] || \"\"}\n                              onChange={handleChange}\n                            ></InputGroup>\n                          </FormGroup>\n                        );\n                      }\n                    )}\n                    <Button icon=\"new-person\" onClick={() => handleSubmit()}>\n                      Add new requester account...\n                    </Button>\n                  </div>\n                )}\n              </Formik>\n            </div>\n          )}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction RequesterFormWithData({ onFinish }: { onFinish: Function }) {\n  const allRequestersAsync = useAxios<Provider>({\n    url: `/launch/options`\n  });\n\n  return (\n    <LaunchOptionsAsync\n      info={allRequestersAsync}\n      onLoading={() => <span>Loading...</span>}\n      onError={() => <span>Error</span>}\n      onData={({ data }) => <RequesterForm onFinish={onFinish} data={data} />}\n    />\n  );\n}\n\nexport default RequesterFormWithData;\n","import React from \"react\";\nimport BaseWidget from \"./Base\";\nimport { Colors, Icon, Button } from \"@blueprintjs/core\";\nimport { pluralize } from \"../utils\";\nimport cx from \"classnames\";\nimport useAxios from \"axios-hooks\";\nimport { Drawer, Classes, Position, Card } from \"@blueprintjs/core\";\nimport { Requesters, Requester } from \"../models\";\nimport { createAsync } from \"../lib/Async\";\nimport RequesterForm from \"../widgets/components/RequesterForm\";\n\nconst Async = createAsync<Requesters>();\n\nexport default (function PrepareWidget() {\n  const [numProviders, setNumProviders] = React.useState(0);\n  const [numInstalledTasks, setNumInstalledTasks] = React.useState(1);\n  const [requesterDrawerOpen, setRequesterDrawerOpen] = React.useState(false);\n\n  const requesterAsync = useAxios<Requesters>({\n    url: \"requesters\"\n  });\n\n  return (\n    <BaseWidget badge=\"Step 1\" heading={<span>Prepare it</span>}>\n      <>\n        <div className=\"bullet\">\n          <div className=\"bp3-text-large bp3-running-text bp3-text-muted\">\n            <Async\n              info={requesterAsync}\n              onError={({ refetch }) => (\n                <span>\n                  <Icon icon=\"warning-sign\" color={Colors.RED3} /> Something\n                  went wrong.{\" \"}\n                  <a onClick={() => refetch()}>\n                    <strong>Try again</strong>\n                  </a>\n                </span>\n              )}\n              onLoading={() => (\n                <div className=\"bp3-skeleton bp3-text\">&nbsp; </div>\n              )}\n              checkIfEmptyFn={data => data.requesters}\n              onEmptyData={() => (\n                <span>\n                  <Icon icon=\"warning-sign\" color={Colors.ORANGE3} />\n                  {\"  \"}\n                  You have no accounts set up.{\" \"}\n                  <a onClick={() => setRequesterDrawerOpen(true)}>\n                    <strong>Configure</strong>\n                  </a>\n                </span>\n              )}\n              onData={({ data }) => (\n                <span>\n                  <Icon icon=\"people\" /> You have{\" \"}\n                  <a onClick={() => setRequesterDrawerOpen(true)}>\n                    <strong>{data.requesters.length} requester accounts</strong>\n                  </a>{\" \"}\n                  set up\n                </span>\n              )}\n            />\n          </div>\n          <Drawer\n            icon=\"people\"\n            onClose={() => setRequesterDrawerOpen(false)}\n            title=\"Requester accounts\"\n            autoFocus={true}\n            canEscapeKeyClose={true}\n            // canOutsideClickClose={true}\n            enforceFocus={true}\n            hasBackdrop={true}\n            isOpen={requesterDrawerOpen}\n            position={Position.BOTTOM}\n            size={\"72%\"}\n            usePortal={true}\n          >\n            <div\n              className={Classes.DRAWER_BODY}\n              style={{ backgroundColor: Colors.LIGHT_GRAY4 }}\n            >\n              <div className={Classes.DIALOG_BODY}>\n                {requesterAsync[0].data && (\n                  <div>\n                    {requesterAsync[0].data.requesters.map((r: Requester) => (\n                      <div key={r.requester_id} style={{ marginBottom: 12 }}>\n                        <Card interactive={true}>\n                          <Icon\n                            icon={r.registered ? \"tick-circle\" : \"issue\"}\n                            color={r.registered ? Colors.GREEN4 : Colors.GRAY4}\n                            title={\"Registered?\"}\n                          />\n                          <span\n                            style={{ margin: \"0 15px\" }}\n                            className=\"bp3-tag bp3-large bp3-minimal bp3-round step-badge\"\n                          >\n                            {r.provider_type}\n                          </span>\n                          <h4\n                            style={{ display: \"inline\", marginRight: 4 }}\n                            className={cx(\"bp3-heading\", {\n                              \"bp3-text-muted\": !r.registered\n                            })}\n                          >\n                            {r.requester_name}\n                          </h4>{\" \"}\n                          {!r.registered && (\n                            <span>\n                              &mdash; This account still needs to be registered.\n                            </span>\n                          )}\n                        </Card>\n                      </div>\n                    ))}\n                    <div style={{ marginTop: 15 }}>\n                      <RequesterForm\n                        onFinish={() => {\n                          setRequesterDrawerOpen(false);\n                          window.location.reload();\n                        }}\n                      />\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </Drawer>\n        </div>\n        <div className=\"bullet\">\n          <div className=\"bp3-text-large bp3-running-text bp3-text-muted\">\n            <Icon icon={numInstalledTasks === 1 ? \"layer\" : \"layers\"} /> You\n            have{\" \"}\n            <strong>\n              {numInstalledTasks} task{\" \"}\n              {pluralize(numInstalledTasks, \"template\")}\n            </strong>\n            {\"  \"}\n            available to use\n          </div>\n        </div>\n      </>\n    </BaseWidget>\n  );\n} as React.FC);\n","export function pluralize(num: Number, word: string, plural?: string): string {\n  if (num === 1) {\n    return word;\n  } else return plural || word + \"s\";\n}\n","import React from \"react\";\nimport { TaskRun } from \"../models\";\nimport { Tag, Intent, Colors } from \"@blueprintjs/core\";\nimport moment from \"moment\";\nimport cx from \"classnames\";\n\nexport default function TaskRunSummary({\n  run,\n  interactive\n}: {\n  run: TaskRun;\n  interactive?: boolean;\n}) {\n  return (\n    <div className={cx(\"run-header\", { interactive: interactive })}>\n      <h5 className=\"bp3-heading\" style={{ display: \"inline\" }}>\n        {run.task_name}\n      </h5>{\" \"}\n      &mdash; {moment.utc(run.start_time).fromNow()}\n      {/* <Tag\n        icon=\"play\"\n        intent={Intent.SUCCESS}\n        interactive={false}\n        style={{ float: \"right\", marginLeft: 10 }}\n      >\n        Running\n      </Tag> */}\n      <div className=\"params-list\" style={{ display: \"block\", marginTop: 10 }}>\n        {Object.entries(run.params).map(([key, value]) => (\n          <span\n            key={key}\n            style={{ display: \"inline-block\", marginRight: 5, fontSize: 12 }}\n          >\n            <span className=\"param-name\">{key}</span>=\n            <strong className=\"param-value\">{value}</strong>\n          </span>\n        ))}\n      </div>\n      <div className=\"details\">\n        <div className=\"metrics highlight-first\">\n          <div className=\"metric\">\n            {run.task_status.created + run.task_status.launched}\n            <label>Remaining</label>\n          </div>\n          <div className=\"metric\">\n            {run.task_status.completed +\n              run.task_status.accepted +\n              run.task_status.mixed +\n              run.task_status.rejected}\n            <label>Completed</label>\n          </div>\n          <div className=\"metric\">\n            {run.task_status.launched + run.task_status.assigned}\n            <label>In-Flight</label>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { FormGroup, InputGroup, Checkbox } from \"@blueprintjs/core\";\n\nfunction FormField({\n  prefix,\n  onUpdate,\n  field\n}: {\n  prefix: string;\n  onUpdate: any;\n  field: any;\n}) {\n  const id = prefix + \"|\" + field.dest + \"|\" + field.option_string;\n  const dispatch = (value: any) => {\n    onUpdate({\n      [id]: value\n    });\n  };\n\n  React.useEffect(() => {\n    if (field.type === \"str2bool\") {\n      dispatch(!!field.default); // for bools, type cast the default value\n    } else if (!!field.default) {\n      dispatch(field.default); // for non-bools, just use the uncasted value\n    }\n  }, [field.default]);\n\n  return field.type === \"str2bool\" ? (\n    <div key={field.dest}>\n      <Checkbox\n        defaultChecked={!!field.default}\n        label={field.dest}\n        onChange={(e: any) => {\n          dispatch(e.target.checked);\n        }}\n      />\n      <p className=\"bp3-text-muted\">{field.help}</p>\n    </div>\n  ) : (\n    <FormGroup label={field.dest} labelInfo={field.help} labelFor={id}>\n      <InputGroup\n        id={id}\n        placeholder={field.default}\n        defaultValue={field.default}\n        onChange={(e: any) => dispatch(e.target.value)}\n      ></InputGroup>\n    </FormGroup>\n  );\n}\n\nexport default FormField;\n","import React from \"react\";\nimport FormField from \"./FormField\";\nimport { Checkbox, Card } from \"@blueprintjs/core\";\n\nfunction OptionsForm({\n  prefix,\n  onUpdate,\n  options\n}: {\n  prefix: string;\n  onUpdate: any;\n  options: any;\n}) {\n  React.useEffect(() => {\n    onUpdate(\"CLEAR_\" + prefix);\n    Object.values(options)\n      .flatMap((opt: any) => Object.values(opt.args))\n      .forEach((field: any) => {\n        const id = prefix + \"|\" + field.dest + \"|\" + field.option_string;\n        onUpdate({\n          [id]: field.default\n        });\n      });\n  }, [options]);\n\n  return (\n    <div>\n      <div style={{ margin: \"20px 0\" }}>\n        <Card className=\"bp3-elevation-2\">\n          {Object.values(options)\n            .flatMap((opt: any) => Object.values(opt.args))\n            .map((field: any) => {\n              return (\n                <FormField\n                  key={prefix + field.dest}\n                  prefix={prefix}\n                  onUpdate={onUpdate}\n                  field={field}\n                />\n              );\n            })}\n        </Card>\n      </div>\n    </div>\n  );\n}\n\nexport default OptionsForm;\n","import React from \"react\";\nimport { Select, ItemRenderer } from \"@blueprintjs/select\";\nimport { Button, MenuItem } from \"@blueprintjs/core\";\nimport { createAsync } from \"../../lib/Async\";\nimport useAxios from \"axios-hooks\";\nimport FormField from \"./FormField\";\nimport OptionsForm from \"./OptionsForm\";\n\ntype IBlueprint = {\n  name: string;\n  rank: number;\n};\n\ntype BlueprintParams = any;\n\nconst BlueprintSelect = Select.ofType<IBlueprint>();\nconst BlueprintParamsAsync = createAsync<BlueprintParams>();\n\nconst renderBlueprintItem: ItemRenderer<IBlueprint> = (\n  blueprint,\n  { handleClick, modifiers, query }\n) => {\n  if (!modifiers.matchesPredicate) {\n    return null;\n  }\n  const text = `${blueprint.rank}. ${blueprint.name}`;\n  return (\n    <MenuItem\n      active={modifiers.active}\n      disabled={modifiers.disabled}\n      key={blueprint.rank}\n      onClick={handleClick}\n      text={highlightText(text, query)}\n    />\n  );\n};\n\nexport default function BlueprintSelectComponent<T>({\n  data,\n  onUpdate\n}: {\n  data: IBlueprint[];\n  onUpdate: Function;\n}) {\n  const [selected, setSelected] = React.useState<IBlueprint | null>(null);\n  const paramsInfo = useAxios({\n    url: `blueprint/${selected?.name || \"none\"}/options`\n  });\n\n  return (\n    <div>\n      <BlueprintSelect\n        items={data}\n        itemRenderer={renderBlueprintItem}\n        onItemSelect={(blueprint: IBlueprint) => {\n          onUpdate({ blueprint: blueprint.name });\n          setSelected(blueprint);\n        }}\n        activeItem={selected}\n      >\n        <Button icon=\"map\" rightIcon=\"caret-down\">\n          {selected ? selected.name : \"Pick a blueprint...\"}\n        </Button>\n      </BlueprintSelect>\n      {selected && (\n        <BlueprintParamsAsync\n          info={paramsInfo}\n          onLoading={() => <span>Loading...</span>}\n          onError={() => <span>Error</span>}\n          onData={({ data }) => (\n            <OptionsForm\n              onUpdate={onUpdate}\n              options={data.options}\n              prefix=\"bp\"\n            />\n          )}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction escapeRegExpChars(text: string) {\n  return text.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n}\n\nfunction highlightText(text: string, query: string) {\n  let lastIndex = 0;\n  const words = query\n    .split(/\\s+/)\n    .filter(word => word.length > 0)\n    .map(escapeRegExpChars);\n  if (words.length === 0) {\n    return [text];\n  }\n  const regexp = new RegExp(words.join(\"|\"), \"gi\");\n  const tokens: React.ReactNode[] = [];\n  while (true) {\n    const match = regexp.exec(text);\n    if (!match) {\n      break;\n    }\n    const length = match[0].length;\n    const before = text.slice(lastIndex, regexp.lastIndex - length);\n    if (before.length > 0) {\n      tokens.push(before);\n    }\n    lastIndex = regexp.lastIndex;\n    tokens.push(<strong key={lastIndex}>{match[0]}</strong>);\n  }\n  const rest = text.slice(lastIndex);\n  if (rest.length > 0) {\n    tokens.push(rest);\n  }\n  return tokens;\n}\n","import React from \"react\";\nimport {\n  Card,\n  Colors,\n  Icon,\n  FormGroup,\n  InputGroup,\n  Checkbox\n} from \"@blueprintjs/core\";\nimport useAxios from \"axios-hooks\";\nimport { createAsync } from \"../../lib/Async\";\nimport OptionsForm from \"./OptionsForm\";\n\ntype ArchitectParams = any;\nconst ArchitectParamsAsync = createAsync<ArchitectParams>();\n\nexport default function ArchitectSelect({\n  data,\n  onUpdate\n}: {\n  data: any;\n  onUpdate: Function;\n}) {\n  const [selected, setSelected] = React.useState(null);\n  const paramsInfo = useAxios({\n    url: `architect/${selected || \"none\"}/options`\n  });\n\n  return (\n    <div>\n      {data.map((arch: any) => (\n        <Card\n          key={arch}\n          interactive={arch !== selected}\n          style={{\n            marginBottom: 10,\n            backgroundColor: arch === selected ? undefined : undefined\n          }}\n          onClick={() => {\n            setSelected(arch);\n            onUpdate({ architect: arch });\n          }}\n        >\n          <Icon\n            icon={arch === selected ? \"tick-circle\" : \"circle\"}\n            color={arch === selected ? Colors.GREEN4 : Colors.GRAY4}\n            title={\"Selected\"}\n            style={{ marginRight: 10 }}\n          />\n          {arch}\n        </Card>\n      ))}\n      {selected && (\n        <ArchitectParamsAsync\n          info={paramsInfo}\n          onLoading={() => <span>Loading...</span>}\n          onError={() => <span>Error</span>}\n          onData={({ data }) => (\n            <OptionsForm\n              onUpdate={onUpdate}\n              options={data.options}\n              prefix=\"arch\"\n            />\n          )}\n        />\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Select, ItemRenderer } from \"@blueprintjs/select\";\nimport { Button, MenuItem } from \"@blueprintjs/core\";\nimport { Requester } from \"../../models\";\n\ntype IRequester = Requester;\n\nconst RequesterSelect = Select.ofType<IRequester>();\n\nconst renderRequesterItem: ItemRenderer<IRequester> = (\n  requester,\n  { handleClick, modifiers, query }\n) => {\n  if (!modifiers.matchesPredicate) {\n    return null;\n  }\n  const text = `${requester.requester_id}. ${requester.requester_name}`;\n  return (\n    <MenuItem\n      active={modifiers.active}\n      disabled={modifiers.disabled}\n      key={requester.requester_id}\n      onClick={handleClick}\n      text={highlightText(text, query)}\n    />\n  );\n};\n\nexport default function RequesterSelectComponent<T>({\n  data,\n  onUpdate\n}: {\n  data: IRequester[];\n  onUpdate: Function;\n}) {\n  const [selected, setSelected] = React.useState<IRequester | null>(null);\n  return (\n    <div>\n      <RequesterSelect\n        items={data}\n        itemRenderer={renderRequesterItem}\n        onItemSelect={(requester: IRequester) => {\n          onUpdate({ requester: requester.requester_name });\n          setSelected(requester);\n        }}\n        activeItem={selected}\n      >\n        <Button icon=\"map\" rightIcon=\"caret-down\">\n          {selected ? selected.requester_name : \"Pick a requester...\"}\n        </Button>\n      </RequesterSelect>\n    </div>\n  );\n}\n\nfunction escapeRegExpChars(text: string) {\n  return text.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n}\n\nfunction highlightText(text: string, query: string) {\n  let lastIndex = 0;\n  const words = query\n    .split(/\\s+/)\n    .filter(word => word.length > 0)\n    .map(escapeRegExpChars);\n  if (words.length === 0) {\n    return [text];\n  }\n  const regexp = new RegExp(words.join(\"|\"), \"gi\");\n  const tokens: React.ReactNode[] = [];\n  while (true) {\n    const match = regexp.exec(text);\n    if (!match) {\n      break;\n    }\n    const length = match[0].length;\n    const before = text.slice(lastIndex, regexp.lastIndex - length);\n    if (before.length > 0) {\n      tokens.push(before);\n    }\n    lastIndex = regexp.lastIndex;\n    tokens.push(<strong key={lastIndex}>{match[0]}</strong>);\n  }\n  const rest = text.slice(lastIndex);\n  if (rest.length > 0) {\n    tokens.push(rest);\n  }\n  return tokens;\n}\n","import { Position, Toaster } from \"@blueprintjs/core\";\n\nlet toaster = Toaster.create({ position: Position.BOTTOM_LEFT });\n\nexport { toaster };\n","import React from \"react\";\nimport BaseWidget from \"./Base\";\nimport useAxios from \"axios-hooks\";\nimport { TaskRun, RunningTasks } from \"../models\";\nimport { task_runs__running } from \"../mocks\";\nimport {\n  Colors,\n  Icon,\n  Drawer,\n  Position,\n  Classes,\n  Card,\n  Button,\n  Intent,\n  Toaster\n} from \"@blueprintjs/core\";\nimport { createAsync, mockRequest } from \"../lib/Async\";\nimport TaskRunSummary from \"./TaskRunSummary\";\nimport BlueprintSelect from \"./components/BlueprintSelect\";\nimport ArchitectSelect from \"./components/ArchitectSelect\";\nimport RequesterSelect from \"./components/RequesterSelect\";\nimport { toaster } from \"../lib/toaster\";\nimport { launchTask } from \"../service\";\nimport OptionsForm from \"./components/OptionsForm\";\n\nconst Async = createAsync<RunningTasks>();\nconst LaunchInfoAsync = createAsync<any>();\nconst RequesterInfoAsync = createAsync<any>();\nconst DefaultTaskInfoAsync = createAsync<any>();\n\nexport default (function LaunchWidget() {\n  // const runningTasksAsync = mockRequest<RunningTasks>(task_runs__running);\n  const runningTasksAsync = useAxios({ url: \"task_runs/running\" });\n\n  return (\n    <BaseWidget badge=\"Step 2\" heading={<span>Launch it</span>}>\n      <Async\n        info={runningTasksAsync}\n        onLoading={() => (\n          <div className=\"bp3-non-ideal-state bp3-skeleton\">\n            <div\n              className=\"bp3-non-ideal-state-visual\"\n              style={{ fontSize: 20 }}\n            >\n              <span className=\"bp3-icon bp3-icon-clean\"></span>\n            </div>\n            <div>You have no tasks running.</div>\n          </div>\n        )}\n        onData={({ data }) => (\n          <div>\n            {data.task_runs.map((run: TaskRun) => (\n              <TaskRunSummary key={run.task_run_id} run={run} />\n            ))}\n          </div>\n        )}\n        checkIfEmptyFn={data => data.task_runs}\n        onEmptyData={() => (\n          <div className=\"bp3-non-ideal-state\">\n            <div\n              className=\"bp3-non-ideal-state-visual\"\n              style={{ fontSize: 20 }}\n            >\n              <span className=\"bp3-icon bp3-icon-clean\"></span>\n            </div>\n            <div>You have no tasks running.</div>\n          </div>\n        )}\n        onError={({ refetch }) => (\n          <span>\n            <Icon icon=\"warning-sign\" color={Colors.RED3} /> Something went\n            wrong.{\" \"}\n            <a onClick={() => refetch()}>\n              <strong>Try again</strong>\n            </a>\n          </span>\n        )}\n      />\n      <div>\n        <div style={{ textAlign: \"center\", marginTop: 15 }}>\n          <LaunchForm />\n        </div>\n      </div>\n    </BaseWidget>\n  );\n} as React.FC);\n\nfunction LaunchForm() {\n  const [openForm, setOpenForm] = React.useState(false);\n  const launchInfo = useAxios({ url: \"launch/options\" });\n  const requesterInfo = useAxios({\n    url: \"requesters\"\n  });\n  const defaultTaskInfo = useAxios({\n    url: \"task_runs/options\"\n  });\n\n  const [params, addToParams] = React.useReducer((state, params) => {\n    let nextState;\n    if (params === \"CLEAR_ALL\") {\n      nextState = {};\n    } else if (params === \"CLEAR_bp\") {\n      nextState = Object.keys(state)\n        .filter(key => !key.startsWith(\"bp|\"))\n        .reduce((obj: any, key: string) => {\n          obj[key] = state[key];\n          return obj;\n        }, {});\n    } else if (params === \"CLEAR_arch\") {\n      nextState = Object.keys(state)\n        .filter(key => !key.startsWith(\"arch|\"))\n        .reduce((obj: any, key: string) => {\n          obj[key] = state[key];\n          return obj;\n        }, {});\n    } else if (params === \"CLEAR_task\") {\n      nextState = Object.keys(state)\n        .filter(key => !key.startsWith(\"task|\"))\n        .reduce((obj: any, key: string) => {\n          obj[key] = state[key];\n          return obj;\n        }, {});\n    } else {\n      nextState = { ...state, ...params };\n    }\n    return nextState;\n  }, {});\n\n  return (\n    <div>\n      <button className=\"bp3-button\" onClick={() => setOpenForm(true)}>\n        Launch a task\n      </button>\n      <Drawer\n        icon=\"people\"\n        onClose={() => setOpenForm(false)}\n        title=\"Launch a task\"\n        autoFocus={true}\n        canEscapeKeyClose={false}\n        canOutsideClickClose={false}\n        enforceFocus={true}\n        hasBackdrop={true}\n        isOpen={openForm}\n        position={Position.RIGHT}\n        size={\"50%\"}\n        usePortal={true}\n      >\n        <div\n          className={Classes.DRAWER_BODY}\n          style={{ backgroundColor: Colors.LIGHT_GRAY4 }}\n        >\n          <div className={Classes.DIALOG_BODY}>\n            <h2>Step 1. Choose a Task Blueprint</h2>\n            <p className=\"bp3-text-muted\">\n              A blueprint defines the task that will be run &amp; its associated\n              configuration parameters.\n            </p>\n            <LaunchInfoAsync\n              info={launchInfo}\n              onLoading={() => <span>Loading...</span>}\n              onData={({ data }) => (\n                <div>\n                  <BlueprintSelect\n                    data={data.blueprint_types}\n                    onUpdate={(data: any) => addToParams(data)}\n                  />\n                </div>\n              )}\n              onError={() => <span>Error</span>}\n            />\n\n            <h2>Step 2. Choose an Architect</h2>\n            <p className=\"bp3-text-muted\">\n              An architect manages the deployment target of your task.\n            </p>\n            <LaunchInfoAsync\n              info={launchInfo}\n              onLoading={() => <span>Loading...</span>}\n              onData={({ data }) => (\n                <div>\n                  <ArchitectSelect\n                    data={data.architect_types}\n                    onUpdate={(data: any) => {\n                      addToParams(data);\n                    }}\n                  />\n                </div>\n              )}\n              onError={() => <span>Error</span>}\n            />\n            <h2>Step 3. Choose a Requester</h2>\n            <p className=\"bp3-text-muted\">\n              A requester is the service account that will run your task.\n            </p>\n            <RequesterInfoAsync\n              info={requesterInfo}\n              onLoading={() => <span>Loading...</span>}\n              onData={({ data }) => (\n                <div>\n                  <RequesterSelect\n                    data={data.requesters.filter((r: any) => r.registered)}\n                    onUpdate={(data: any) => {\n                      addToParams(data);\n                    }}\n                  />\n                </div>\n              )}\n              onError={() => <span>Error</span>}\n            />\n            <h2>Step 4. Final Task Options</h2>\n            <DefaultTaskInfoAsync\n              info={defaultTaskInfo}\n              onLoading={() => <span>Loading...</span>}\n              onData={({ data }) => (\n                <div>\n                  <OptionsForm\n                    prefix=\"task\"\n                    options={data.options}\n                    onUpdate={(data: any) => addToParams(data)}\n                  />\n                </div>\n              )}\n              onError={() => <span>Error</span>}\n            />\n\n            <Button\n              onClick={() => {\n                let validated =\n                  params.blueprint !== undefined &&\n                  params.architect !== undefined &&\n                  params.requester !== undefined;\n\n                const allTaskParamsFilled = Object.entries(params).reduce(\n                  (allFilled, [key, value]) => {\n                    if (key.startsWith(\"task|\")) {\n                      return allFilled && value !== null;\n                    } else {\n                      return allFilled;\n                    }\n                  },\n                  true\n                );\n\n                validated = validated && allTaskParamsFilled;\n\n                if (validated) {\n                  addToParams(\"CLEAR_ALL\");\n\n                  launchTask(params)\n                    .then(() => {\n                      setOpenForm(false);\n\n                      toaster.dismiss(\"loading-msg\");\n                      toaster.show({\n                        message: \"Launched!\",\n                        icon: \"cloud-upload\",\n                        intent: Intent.SUCCESS,\n                        timeout: 3000\n                      });\n                    })\n                    .catch(() => {\n                      // TODO: Handle error, also check payload in case\n                      // it specifies an error, e.g. ensure that\n                      // payload.status === 'success'\n                    });\n\n                  toaster.show(\n                    {\n                      message:\n                        \"Launching task... Please wait this may take a while.\",\n                      icon: \"cloud-upload\",\n                      intent: Intent.NONE,\n                      timeout: 40000\n                    },\n                    \"loading-msg\"\n                  );\n                } else {\n                  toaster.show({\n                    message:\n                      \"Error: Must select Blueprint + Architect + Requester and fill all task params\",\n                    icon: \"cloud-upload\",\n                    intent: Intent.DANGER,\n                    timeout: 2000\n                  });\n                }\n              }}\n              large\n              icon=\"cloud-upload\"\n              intent={Intent.SUCCESS}\n              style={{ margin: \"20px auto 0\" }}\n            >\n              Launch\n            </Button>\n          </div>\n        </div>\n      </Drawer>\n    </div>\n  );\n}\n","import React from \"react\";\nimport BaseWidget from \"./Base\";\nimport useAxios from \"axios-hooks\";\nimport { createAsync, mockRequest } from \"../lib/Async\";\nimport { Icon, Colors, Button, Intent } from \"@blueprintjs/core\";\nimport { ReviewableTasks } from \"../models\";\nimport TaskRunSummary from \"./TaskRunSummary\";\nimport { Link } from \"react-router-dom\";\n\nconst Async = createAsync<ReviewableTasks>();\n\nexport default (function ReviewWidget() {\n  const reviewAsync = useAxios({\n    url: \"task_runs/reviewable\"\n  });\n\n  return (\n    <BaseWidget badge=\"Step 3\" heading={<span>Review it</span>}>\n      <Async\n        info={reviewAsync}\n        onLoading={() => (\n          <div className=\"bp3-skeleton\">\n            <div className=\"bp3-non-ideal-state\">\n              <div\n                className=\"bp3-non-ideal-state-visual\"\n                style={{ fontSize: 20 }}\n              >\n                <span className=\"bp3-icon bp3-icon-inbox-search\"></span>\n              </div>\n              <div>You have no work to review.</div>\n            </div>\n          </div>\n        )}\n        onError={({ refetch }) => (\n          <span>\n            <Icon icon=\"warning-sign\" color={Colors.RED3} /> Something went\n            wrong.{\" \"}\n            <a onClick={() => refetch()}>\n              <strong>Try again</strong>\n            </a>\n          </span>\n        )}\n        onData={({ data }) => (\n          <span>\n            {data.task_runs.map(run => (\n              <Link\n                key={run.task_run_id}\n                to={\"/review/\" + run.task_run_id}\n                style={{ textDecoration: \"none\", color: \"inherit\" }}\n              >\n                <TaskRunSummary\n                  key={run.task_run_id}\n                  run={run}\n                  interactive={true}\n                />\n              </Link>\n            ))}\n          </span>\n        )}\n        checkIfEmptyFn={data => data.task_runs}\n        onEmptyData={() => (\n          <div>\n            <div className=\"bp3-non-ideal-state\">\n              <div\n                className=\"bp3-non-ideal-state-visual\"\n                style={{ fontSize: 20 }}\n              >\n                <span className=\"bp3-icon bp3-icon-inbox-search\"></span>\n              </div>\n              <div>You have no work to review.</div>\n            </div>\n          </div>\n        )}\n      />\n    </BaseWidget>\n  );\n} as React.FC);\n","import React from \"react\";\nimport { useTable } from \"react-table\";\nimport { createAsync } from \"../lib/Async\";\nimport useAxios from \"axios-hooks\";\nimport { ButtonGroup, Tooltip, Icon } from \"@blueprintjs/core\";\nimport { Link } from \"react-router-dom\";\nimport { reviewActions } from \"../service\";\nimport { ObjectInspector } from \"react-inspector\";\n\nconst GridReviewAsync = createAsync();\n\nfunction GridReviewWithData({ id }) {\n  const gridReviewAsync = useAxios({\n    url: \"data/submitted_data?task_run_id=\" + id\n  });\n\n  return (\n    <GridReviewAsync\n      info={gridReviewAsync}\n      onData={({ data }) => (\n        <div>\n          <GridReview data={data} id={id} />\n        </div>\n      )}\n      onError={() => null}\n      onLoading={() => null}\n      onEmptyData={() => <div>There are no units to review...</div>}\n      checkIfEmptyFn={data => data.units}\n    />\n  );\n}\n\nfunction GridReview({ data, id }) {\n  const sampleTestData = [\n    {\n      assignment_id: \"179\",\n      data: {\n        inputs: {\n          character_description: \"I'm a character loaded from Mephisto!\",\n          character_name: \"Loaded Character 1\",\n          html: \"demo_task.html\"\n        },\n        outputs: { rating: \"good\" }\n      },\n      status: \"expired\",\n      task_run_id: \"136\",\n      unit_id: \"231\",\n      worker_id: \"10\"\n    }\n  ];\n\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow\n  } = useTable({\n    // data: sampleTestData,\n    data: data.units,\n    columns: [\n      { Header: \"Assignment ID\", accessor: \"assignment_id\" },\n      { Header: \"Unit ID\", accessor: \"unit_id\" },\n      { Header: \"Worker ID\", accessor: \"worker_id\" },\n      {\n        Header: \"Input\",\n        accessor: \"data.inputs\",\n        Cell: ({ cell: { value } }) => {\n          return (\n            <div style={{ maxWidth: 500 }}>\n              <ObjectInspector data={value} />\n            </div>\n          );\n        }\n      },\n      {\n        Header: \"Output\",\n        accessor: \"data.outputs\",\n        Cell: ({ cell: { value } }) => {\n          return (\n            <div style={{ maxWidth: 500 }}>\n              <ObjectInspector data={value} />\n            </div>\n          );\n        }\n      },\n      {\n        Header: \"Status\",\n        accessor: \"status\",\n        Cell: ({ cell: { value } }) => (\n          <span className=\"bp3-tag bp3-minimal\">{value}</span>\n        )\n      },\n      {\n        Header: \"Actions\",\n        Cell: ({ cell: { row } }) => {\n          const unitId = row.values.unit_id;\n          return (\n            <div>\n              <ButtonGroup style={{ marginRight: 20, marginBottom: 5 }}>\n                <Tooltip content=\"Accept &amp; Pay\">\n                  <button\n                    className=\"bp3-button bp3-intent-success\"\n                    onClick={() => reviewActions.accept(unitId)}\n                  >\n                    <Icon icon=\"thumbs-up\" />\n                  </button>\n                </Tooltip>\n                <Tooltip content=\"Reject &amp; Pay\">\n                  <button\n                    className=\"bp3-button\"\n                    onClick={() => reviewActions.rejectAndPay(unitId)}\n                  >\n                    <Icon icon=\"thumbs-down\" />\n                  </button>\n                </Tooltip>\n              </ButtonGroup>\n              <ButtonGroup>\n                <Tooltip content=\"Soft Block\">\n                  <button\n                    className=\"bp3-button bp3-small\"\n                    onClick={() => reviewActions.softBlock(unitId)}\n                  >\n                    <Icon icon=\"stopwatch\" />\n                  </button>\n                </Tooltip>\n                <Tooltip content=\"Hard Block\">\n                  <button\n                    className=\"bp3-button bp3-small bp3-intent-danger\"\n                    onClick={() => reviewActions.hardBlock(unitId)}\n                  >\n                    <Icon icon=\"blocked-person\" />\n                  </button>\n                </Tooltip>\n              </ButtonGroup>\n            </div>\n          );\n        }\n      }\n    ]\n  });\n  return (\n    <div>\n      <div style={{ margin: \"10px 0px\" }}>\n        <Link to=\"/\">&laquo; Return</Link>\n      </div>\n      <h3>Task Run #{id}</h3>\n      <table\n        className=\"bp3-html-table-striped bp3-html-table\"\n        {...getTableProps()}\n      >\n        <thead>\n          {headerGroups.map(headerGroup => (\n            <tr {...headerGroup.getHeaderGroupProps()}>\n              {headerGroup.headers.map(column => (\n                <th {...column.getHeaderProps()}>{column.render(\"Header\")}</th>\n              ))}\n            </tr>\n          ))}\n        </thead>\n        <tbody {...getTableBodyProps()}>\n          {rows.map((row, i) => {\n            prepareRow(row);\n            return (\n              <tr {...row.getRowProps()}>\n                {row.cells.map(cell => {\n                  return (\n                    <td {...cell.getCellProps()}>{cell.render(\"Cell\")}</td>\n                  );\n                })}\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default GridReviewWithData;\n","import React from \"react\";\nimport \"./App.css\";\nimport PrepareWidget from \"./widgets/Prepare\";\nimport LaunchWidget from \"./widgets/Launch\";\nimport ReviewWidget from \"./widgets/Review\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport { Card } from \"@blueprintjs/core\";\nimport GridReview from \"./widgets/GridReview\";\n\nconst App: React.FC = () => {\n  return (\n    <Router>\n      <div className=\"App\">\n        <div className=\"above-the-fold\"></div>\n        <header>\n          <div>\n            <h1 className=\"bp3-heading\">\n              <Link to=\"/\">mephisto</Link>\n            </h1>\n            <em\n              className=\"bp3-italics bp3-text-large bp3-text-disabled\"\n              style={{ position: \"relative\", top: -8 }}\n            >\n              crowdsourcing without the tears\n            </em>\n          </div>\n        </header>\n        <div>\n          <Switch>\n            <Route exact path=\"/\">\n              <div className=\"container\">\n                <PrepareWidget />\n                <LaunchWidget />\n                <ReviewWidget />\n              </div>\n            </Route>\n            <Route\n              path=\"/review/:id\"\n              render={({ match: { params } }) => (\n                <div style={{ margin: 30 }}>\n                  <div className=\"bp3-card bp3-elevation-3 widget widget\">\n                    <GridReview id={params.id} />\n                  </div>\n                </div>\n              )}\n            />\n          </Switch>\n        </div>\n      </div>\n    </Router>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\n\nimport \"./axios\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}