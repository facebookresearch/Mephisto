{"version":3,"sources":["widgets/Base.tsx","lib/Async.ts","widgets/Prepare.tsx","utils.ts","widgets/TaskRunSummary.tsx","widgets/components/FormField.tsx","widgets/components/OptionsForm.tsx","widgets/components/BlueprintSelect.tsx","widgets/components/ArchitectSelect.tsx","widgets/components/RequesterSelect.tsx","lib/toaster.ts","axios.ts","service.ts","widgets/Launch.tsx","widgets/Review.tsx","App.tsx","index.tsx"],"names":["children","heading","badge","elevation","Elevation","THREE","className","style","marginBottom","undefined","isEmpty","require","createAsync","Async","info","onLoading","onError","onData","onEmptyData","checkIfEmptyFn","data","loading","error","baseProps","refetch","axiosInfo","response","dataToCheckIfEmpty","word","plural","React","useState","numInstalledTasks","requesterDrawerOpen","setRequesterDrawerOpen","requesterAsync","useAxios","url","Base","icon","color","Colors","RED3","onClick","requesters","ORANGE3","length","onClose","title","autoFocus","canEscapeKeyClose","enforceFocus","hasBackdrop","isOpen","position","Position","BOTTOM","size","usePortal","Classes","DRAWER_BODY","backgroundColor","LIGHT_GRAY4","DIALOG_BODY","map","r","key","requester_id","interactive","registered","GREEN4","GRAY4","margin","provider_type","display","marginRight","cx","requester_name","marginTop","disabled","TaskRunSummary","run","LIGHT_GRAY5","padding","borderColor","GRAY5","borderWidth","borderStyle","borderRadius","task_name","moment","start_time","fromNow","intent","Intent","SUCCESS","float","marginLeft","param_string","task_status","created","launched","completed","accepted","mixed","rejected","assigned","FormField","prefix","onUpdate","field","id","dest","option_string","dispatch","value","useEffect","type","default","defaultChecked","label","onChange","e","target","checked","help","labelInfo","labelFor","placeholder","defaultValue","OptionsForm","options","Object","values","flatMap","opt","args","forEach","BlueprintSelect","Select","ofType","BlueprintParamsAsync","renderBlueprintItem","blueprint","handleClick","modifiers","query","matchesPredicate","text","rank","name","active","highlightText","BlueprintSelectComponent","selected","setSelected","paramsInfo","items","itemRenderer","onItemSelect","activeItem","rightIcon","escapeRegExpChars","replace","lastIndex","words","split","filter","regexp","RegExp","join","tokens","match","exec","before","slice","push","rest","ArchitectParamsAsync","ArchitectSelect","arch","architect","requester","toaster","Toaster","create","BOTTOM_LEFT","axios","Axios","baseURL","interceptors","request","use","config","delayed","Promise","resolve","setTimeout","configure","launchTask","transformedPayload","transformed","entries","toString","console","table","fromEntries","mapDataToExpectedPayload","post","LaunchInfoAsync","RequesterInfoAsync","DefaultTaskInfoAsync","runningTasksAsync","fontSize","task_runs","task_run_id","textAlign","LaunchForm","openForm","setOpenForm","launchInfo","requesterInfo","defaultTaskInfo","useReducer","state","params","keys","startsWith","reduce","obj","addToParams","canOutsideClickClose","RIGHT","blueprint_types","architect_types","show","message","NONE","timeout","JSON","stringify","DANGER","large","reviewAsync","App","top","Prepare","Launch","Review","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.378125fb.chunk.js","sourcesContent":["import React from \"react\";\nimport { Card, Elevation } from \"@blueprintjs/core\";\n\ninterface BaseProps {\n  heading: React.ReactElement;\n  badge: string | undefined;\n}\n\nexport default (function BaseWidget({ children, heading, badge }) {\n  return (\n    <Card elevation={Elevation.THREE} className=\"widget\">\n      <h4 className=\"bp3-heading\" style={{ marginBottom: 15 }}>\n        {badge !== undefined && (\n          <span className=\"bp3-tag bp3-large bp3-minimal bp3-round step-badge\">\n            {badge}\n          </span>\n        )}\n        {heading}\n      </h4>\n      {children}\n    </Card>\n  );\n} as React.FC<BaseProps>);\n","import React from \"react\";\nimport { AxiosPromise, AxiosRequestConfig } from \"axios\";\nimport { ResponseValues, RefetchOptions } from \"axios-hooks\";\nconst isEmpty = require(\"lodash.isempty\");\n\ntype AxiosInfo<T> =\n  | [\n      ResponseValues<T>,\n      (config?: AxiosRequestConfig, options?: RefetchOptions) => AxiosPromise<T>\n    ]\n  | [ResponseValues<T>];\n\ntype BaseAsyncProps<T> = {\n  axiosInfo: AxiosInfo<T>;\n  refetch: Function;\n};\n\ntype AsyncProps<T> = {\n  info: AxiosInfo<T>;\n  onLoading: React.FC<BaseAsyncProps<T>>;\n  onError: React.FC<{ error: any } & BaseAsyncProps<T>>;\n  onData: React.FC<{ data: T } & BaseAsyncProps<T>>;\n  onEmptyData?: React.FC<{ data: T } & BaseAsyncProps<T>>;\n  checkIfEmptyFn?: (data: T) => any;\n};\n\nexport type AsyncComponent<T = any> = React.FC<AsyncProps<T>>;\n\nexport function createAsync<T>() {\n  return Async as AsyncComponent<T>;\n}\n\nconst Async: AsyncComponent = ({\n  info,\n  onLoading,\n  onError,\n  onData,\n  onEmptyData,\n  checkIfEmptyFn: checkIfEmptyFn\n}) => {\n  const [{ data, loading, error }, refetch = () => {}] = info;\n\n  const baseProps: BaseAsyncProps<any> = { refetch, axiosInfo: info };\n\n  if (loading) return onLoading({ ...baseProps });\n  else if (error) return onError({ error: error.response?.data, ...baseProps });\n\n  const dataToCheckIfEmpty =\n    checkIfEmptyFn !== undefined ? checkIfEmptyFn(data) : data;\n  const dataIsEmpty = isEmpty(dataToCheckIfEmpty);\n\n  if (dataIsEmpty && onEmptyData !== undefined)\n    return onEmptyData({ data, ...baseProps });\n  else return onData({ data, ...baseProps });\n};\n\nexport default Async;\n\nexport function mockRequest<T>(\n  mockData: T,\n  error: any = undefined,\n  loading: boolean = false\n) {\n  const request = {\n    data: mockData,\n    loading,\n    error: error && { response: { data: error } }\n  } as ResponseValues<T>;\n  return [request, () => {}] as [ResponseValues<T>, any];\n}\n","import React from \"react\";\nimport BaseWidget from \"./Base\";\nimport { Colors, Icon, Button } from \"@blueprintjs/core\";\nimport { pluralize } from \"../utils\";\nimport cx from \"classnames\";\nimport useAxios from \"axios-hooks\";\nimport { Drawer, Classes, Position, Card } from \"@blueprintjs/core\";\nimport { Requesters, Requester } from \"../models\";\nimport { createAsync } from \"../lib/Async\";\n\nconst Async = createAsync<Requesters>();\n\nexport default (function PrepareWidget() {\n  const [numProviders, setNumProviders] = React.useState(0);\n  const [numInstalledTasks, setNumInstalledTasks] = React.useState(1);\n  const [requesterDrawerOpen, setRequesterDrawerOpen] = React.useState(false);\n\n  const requesterAsync = useAxios<Requesters>({\n    url: \"requesters\"\n  });\n\n  return (\n    <BaseWidget badge=\"Step 1\" heading={<span>Prepare it</span>}>\n      <>\n        <div className=\"bullet\">\n          <div className=\"bp3-text-large bp3-running-text bp3-text-muted\">\n            <Async\n              info={requesterAsync}\n              onError={({ refetch }) => (\n                <span>\n                  <Icon icon=\"warning-sign\" color={Colors.RED3} /> Something\n                  went wrong.{\" \"}\n                  <a onClick={() => refetch()}>\n                    <strong>Try again</strong>\n                  </a>\n                </span>\n              )}\n              onLoading={() => (\n                <div className=\"bp3-skeleton bp3-text\">&nbsp; </div>\n              )}\n              checkIfEmptyFn={data => data.requesters}\n              onEmptyData={() => (\n                <span>\n                  <Icon icon=\"warning-sign\" color={Colors.ORANGE3} />\n                  {\"  \"}\n                  You have no accounts set up.{\" \"}\n                  <a>\n                    <strong>Configure</strong>\n                  </a>\n                </span>\n              )}\n              onData={({ data }) => (\n                <span>\n                  <Icon icon=\"people\" /> You have{\" \"}\n                  <a onClick={() => setRequesterDrawerOpen(true)}>\n                    <strong>{data.requesters.length} requester accounts</strong>\n                  </a>{\" \"}\n                  set up\n                </span>\n              )}\n            />\n          </div>\n          <Drawer\n            icon=\"people\"\n            onClose={() => setRequesterDrawerOpen(false)}\n            title=\"Requester accounts\"\n            autoFocus={true}\n            canEscapeKeyClose={true}\n            // canOutsideClickClose={true}\n            enforceFocus={true}\n            hasBackdrop={true}\n            isOpen={requesterDrawerOpen}\n            position={Position.BOTTOM}\n            size={\"72%\"}\n            usePortal={true}\n          >\n            <div\n              className={Classes.DRAWER_BODY}\n              style={{ backgroundColor: Colors.LIGHT_GRAY4 }}\n            >\n              <div className={Classes.DIALOG_BODY}>\n                {requesterAsync[0].data && (\n                  <div>\n                    {requesterAsync[0].data.requesters.map((r: Requester) => (\n                      <div key={r.requester_id} style={{ marginBottom: 12 }}>\n                        <Card interactive={true}>\n                          <Icon\n                            icon={r.registered ? \"tick-circle\" : \"issue\"}\n                            color={r.registered ? Colors.GREEN4 : Colors.GRAY4}\n                            title={\"Registered?\"}\n                          />\n                          <span\n                            style={{ margin: \"0 15px\" }}\n                            className=\"bp3-tag bp3-large bp3-minimal bp3-round step-badge\"\n                          >\n                            {r.provider_type}\n                          </span>\n                          <h4\n                            style={{ display: \"inline\", marginRight: 4 }}\n                            className={cx(\"bp3-heading\", {\n                              \"bp3-text-muted\": !r.registered\n                            })}\n                          >\n                            {r.requester_name}\n                          </h4>{\" \"}\n                          {!r.registered && (\n                            <span>\n                              &mdash; This account still needs to be registered.\n                            </span>\n                          )}\n                        </Card>\n                      </div>\n                    ))}\n                    <div style={{ marginTop: 15 }}>\n                      <Button disabled icon=\"new-person\">\n                        [TODO] Add a new requester account...\n                      </Button>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </Drawer>\n        </div>\n        <div className=\"bullet\">\n          <div className=\"bp3-text-large bp3-running-text bp3-text-muted\">\n            <Icon icon={numInstalledTasks === 1 ? \"layer\" : \"layers\"} /> You\n            have{\" \"}\n            <strong>\n              {numInstalledTasks} task{\" \"}\n              {pluralize(numInstalledTasks, \"template\")}\n            </strong>\n            {\"  \"}\n            available to use\n          </div>\n        </div>\n      </>\n    </BaseWidget>\n  );\n} as React.FC);\n","export function pluralize(num: Number, word: string, plural?: string): string {\n  if (num === 1) {\n    return word;\n  } else return plural || word + \"s\";\n}\n","import React from \"react\";\nimport { TaskRun } from \"../models\";\nimport { Tag, Intent, Colors } from \"@blueprintjs/core\";\nimport moment from \"moment\";\n\nexport default function TaskRunSummary({ run }: { run: TaskRun }) {\n  return (\n    <div\n      className=\"run-header\"\n      style={{\n        backgroundColor: Colors.LIGHT_GRAY5,\n        padding: 10,\n        marginBottom: \"10px\",\n        borderColor: Colors.GRAY5,\n        borderWidth: 1,\n        borderStyle: \"solid\",\n        borderRadius: 5\n      }}\n    >\n      <h5 className=\"bp3-heading\" style={{ display: \"inline\" }}>\n        {run.task_name}\n      </h5>{\" \"}\n      &mdash; {moment(run.start_time).fromNow()}\n      <Tag\n        icon=\"play\"\n        intent={Intent.SUCCESS}\n        interactive={false}\n        style={{ float: \"right\", marginLeft: 10 }}\n      >\n        Running\n      </Tag>\n      <code\n        className=\"bp3-code params-list\"\n        style={{ display: \"block\", marginTop: 10 }}\n      >\n        {run.param_string}\n      </code>\n      <div className=\"details\">\n        <div className=\"metrics highlight-first\">\n          <div className=\"metric\">\n            {run.task_status.created + run.task_status.launched}\n            <label>Remaining</label>\n          </div>\n          <div className=\"metric\">\n            {run.task_status.completed +\n              run.task_status.accepted +\n              run.task_status.mixed +\n              run.task_status.rejected}\n            <label>Completed</label>\n          </div>\n          <div className=\"metric\">\n            {run.task_status.launched + run.task_status.assigned}\n            <label>In-Flight</label>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { FormGroup, InputGroup, Checkbox } from \"@blueprintjs/core\";\n\nfunction FormField({\n  prefix,\n  onUpdate,\n  field\n}: {\n  prefix: string;\n  onUpdate: any;\n  field: any;\n}) {\n  const id = prefix + \"|\" + field.dest + \"|\" + field.option_string;\n  const dispatch = (value: any) => {\n    onUpdate({\n      [id]: value\n    });\n  };\n\n  React.useEffect(() => {\n    if (field.type === \"bool\") {\n      dispatch(!!field.default); // for bools, type cast the default value\n    } else if (!!field.default) {\n      dispatch(field.default); // for non-bools, just use the uncasted value\n    }\n  }, [field.default]);\n\n  return field.type === \"bool\" ? (\n    <div key={field.dest}>\n      <Checkbox\n        defaultChecked={!!field.default}\n        label={field.dest}\n        onChange={(e: any) => {\n          dispatch(e.target.checked);\n        }}\n      />\n      <p className=\"bp3-text-muted\">{field.help}</p>\n    </div>\n  ) : (\n    <FormGroup label={field.dest} labelInfo={field.help} labelFor={id}>\n      <InputGroup\n        id={id}\n        placeholder={field.default}\n        defaultValue={field.default}\n        onChange={(e: any) => dispatch(e.target.value)}\n      ></InputGroup>\n    </FormGroup>\n  );\n}\n\nexport default FormField;\n","import React from \"react\";\nimport FormField from \"./FormField\";\nimport { Checkbox, Card } from \"@blueprintjs/core\";\n\nfunction OptionsForm({\n  prefix,\n  onUpdate,\n  options\n}: {\n  prefix: string;\n  onUpdate: any;\n  options: any;\n}) {\n  React.useEffect(() => {\n    onUpdate(\"CLEAR_\" + prefix);\n    Object.values(options)\n      .flatMap((opt: any) => Object.values(opt.args))\n      .forEach((field: any) => {\n        const id = prefix + \"|\" + field.dest + \"|\" + field.option_string;\n        onUpdate({\n          [id]: field.default\n        });\n      });\n  }, [options]);\n\n  return (\n    <div>\n      <div style={{ margin: \"20px 0\" }}>\n        <Card className=\"bp3-elevation-2\">\n          {Object.values(options)\n            .flatMap((opt: any) => Object.values(opt.args))\n            .map((field: any) => {\n              return (\n                <FormField\n                  key={prefix + field.dest}\n                  prefix={prefix}\n                  onUpdate={onUpdate}\n                  field={field}\n                />\n              );\n            })}\n        </Card>\n      </div>\n    </div>\n  );\n}\n\nexport default OptionsForm;\n","import React from \"react\";\nimport { Select, ItemRenderer } from \"@blueprintjs/select\";\nimport { Button, MenuItem } from \"@blueprintjs/core\";\nimport { createAsync } from \"../../lib/Async\";\nimport useAxios from \"axios-hooks\";\nimport FormField from \"./FormField\";\nimport OptionsForm from \"./OptionsForm\";\n\ntype IBlueprint = {\n  name: string;\n  rank: number;\n};\n\ntype BlueprintParams = any;\n\nconst BlueprintSelect = Select.ofType<IBlueprint>();\nconst BlueprintParamsAsync = createAsync<BlueprintParams>();\n\nconst renderBlueprintItem: ItemRenderer<IBlueprint> = (\n  blueprint,\n  { handleClick, modifiers, query }\n) => {\n  if (!modifiers.matchesPredicate) {\n    return null;\n  }\n  const text = `${blueprint.rank}. ${blueprint.name}`;\n  return (\n    <MenuItem\n      active={modifiers.active}\n      disabled={modifiers.disabled}\n      key={blueprint.rank}\n      onClick={handleClick}\n      text={highlightText(text, query)}\n    />\n  );\n};\n\nexport default function BlueprintSelectComponent<T>({\n  data,\n  onUpdate\n}: {\n  data: IBlueprint[];\n  onUpdate: Function;\n}) {\n  const [selected, setSelected] = React.useState<IBlueprint | null>(null);\n  const paramsInfo = useAxios({\n    url: `blueprint/${selected?.name || \"none\"}/options`\n  });\n\n  return (\n    <div>\n      <BlueprintSelect\n        items={data}\n        itemRenderer={renderBlueprintItem}\n        onItemSelect={(blueprint: IBlueprint) => {\n          onUpdate({ blueprint: blueprint.name });\n          setSelected(blueprint);\n        }}\n        activeItem={selected}\n      >\n        <Button icon=\"map\" rightIcon=\"caret-down\">\n          {selected ? selected.name : \"Pick a blueprint...\"}\n        </Button>\n      </BlueprintSelect>\n      {selected && (\n        <BlueprintParamsAsync\n          info={paramsInfo}\n          onLoading={() => <span>Loading...</span>}\n          onError={() => <span>Error</span>}\n          onData={({ data }) => (\n            <OptionsForm\n              onUpdate={onUpdate}\n              options={data.options}\n              prefix=\"bp\"\n            />\n          )}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction escapeRegExpChars(text: string) {\n  return text.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n}\n\nfunction highlightText(text: string, query: string) {\n  let lastIndex = 0;\n  const words = query\n    .split(/\\s+/)\n    .filter(word => word.length > 0)\n    .map(escapeRegExpChars);\n  if (words.length === 0) {\n    return [text];\n  }\n  const regexp = new RegExp(words.join(\"|\"), \"gi\");\n  const tokens: React.ReactNode[] = [];\n  while (true) {\n    const match = regexp.exec(text);\n    if (!match) {\n      break;\n    }\n    const length = match[0].length;\n    const before = text.slice(lastIndex, regexp.lastIndex - length);\n    if (before.length > 0) {\n      tokens.push(before);\n    }\n    lastIndex = regexp.lastIndex;\n    tokens.push(<strong key={lastIndex}>{match[0]}</strong>);\n  }\n  const rest = text.slice(lastIndex);\n  if (rest.length > 0) {\n    tokens.push(rest);\n  }\n  return tokens;\n}\n","import React from \"react\";\nimport {\n  Card,\n  Colors,\n  Icon,\n  FormGroup,\n  InputGroup,\n  Checkbox\n} from \"@blueprintjs/core\";\nimport useAxios from \"axios-hooks\";\nimport { createAsync } from \"../../lib/Async\";\nimport OptionsForm from \"./OptionsForm\";\n\ntype ArchitectParams = any;\nconst ArchitectParamsAsync = createAsync<ArchitectParams>();\n\nexport default function ArchitectSelect({\n  data,\n  onUpdate\n}: {\n  data: any;\n  onUpdate: Function;\n}) {\n  const [selected, setSelected] = React.useState(null);\n  const paramsInfo = useAxios({\n    url: `architect/${selected || \"none\"}/options`\n  });\n\n  return (\n    <div>\n      {data.map((arch: any) => (\n        <Card\n          key={arch}\n          interactive={arch !== selected}\n          style={{\n            marginBottom: 10,\n            backgroundColor: arch === selected ? undefined : undefined\n          }}\n          onClick={() => {\n            setSelected(arch);\n            onUpdate({ architect: arch });\n          }}\n        >\n          <Icon\n            icon={arch === selected ? \"tick-circle\" : \"circle\"}\n            color={arch === selected ? Colors.GREEN4 : Colors.GRAY4}\n            title={\"Selected\"}\n            style={{ marginRight: 10 }}\n          />\n          {arch}\n        </Card>\n      ))}\n      {selected && (\n        <ArchitectParamsAsync\n          info={paramsInfo}\n          onLoading={() => <span>Loading...</span>}\n          onError={() => <span>Error</span>}\n          onData={({ data }) => (\n            <OptionsForm\n              onUpdate={onUpdate}\n              options={data.options}\n              prefix=\"arch\"\n            />\n          )}\n        />\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Select, ItemRenderer } from \"@blueprintjs/select\";\nimport { Button, MenuItem } from \"@blueprintjs/core\";\nimport { createAsync } from \"../../lib/Async\";\nimport useAxios from \"axios-hooks\";\nimport FormField from \"./FormField\";\nimport OptionsForm from \"./OptionsForm\";\nimport { Requester } from \"../../models\";\n\ntype IRequester = Requester;\n\ntype BlueprintParams = any;\n\nconst BlueprintSelect = Select.ofType<IRequester>();\nconst BlueprintParamsAsync = createAsync<BlueprintParams>();\n\nconst renderBlueprintItem: ItemRenderer<IRequester> = (\n  requester,\n  { handleClick, modifiers, query }\n) => {\n  if (!modifiers.matchesPredicate) {\n    return null;\n  }\n  const text = `${requester.requester_id}. ${requester.requester_name}`;\n  return (\n    <MenuItem\n      active={modifiers.active}\n      disabled={modifiers.disabled}\n      key={requester.requester_id}\n      onClick={handleClick}\n      text={highlightText(text, query)}\n    />\n  );\n};\n\nexport default function BlueprintSelectComponent<T>({\n  data,\n  onUpdate\n}: {\n  data: IRequester[];\n  onUpdate: Function;\n}) {\n  const [selected, setSelected] = React.useState<IRequester | null>(null);\n  return (\n    <div>\n      <BlueprintSelect\n        items={data}\n        itemRenderer={renderBlueprintItem}\n        onItemSelect={(requester: IRequester) => {\n          onUpdate({ requester: requester.requester_name });\n          setSelected(requester);\n        }}\n        activeItem={selected}\n      >\n        <Button icon=\"map\" rightIcon=\"caret-down\">\n          {selected ? selected.requester_name : \"Pick a requester...\"}\n        </Button>\n      </BlueprintSelect>\n    </div>\n  );\n}\n\nfunction escapeRegExpChars(text: string) {\n  return text.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n}\n\nfunction highlightText(text: string, query: string) {\n  let lastIndex = 0;\n  const words = query\n    .split(/\\s+/)\n    .filter(word => word.length > 0)\n    .map(escapeRegExpChars);\n  if (words.length === 0) {\n    return [text];\n  }\n  const regexp = new RegExp(words.join(\"|\"), \"gi\");\n  const tokens: React.ReactNode[] = [];\n  while (true) {\n    const match = regexp.exec(text);\n    if (!match) {\n      break;\n    }\n    const length = match[0].length;\n    const before = text.slice(lastIndex, regexp.lastIndex - length);\n    if (before.length > 0) {\n      tokens.push(before);\n    }\n    lastIndex = regexp.lastIndex;\n    tokens.push(<strong key={lastIndex}>{match[0]}</strong>);\n  }\n  const rest = text.slice(lastIndex);\n  if (rest.length > 0) {\n    tokens.push(rest);\n  }\n  return tokens;\n}\n","import { Position, Toaster } from \"@blueprintjs/core\";\n\nlet toaster = Toaster.create({ position: Position.BOTTOM_LEFT });\n\nexport { toaster };\n","import { configure } from \"axios-hooks\";\nimport Axios, { AxiosRequestConfig } from \"axios\";\n\nconst axios = Axios.create({\n  baseURL: \"http://localhost:5000/api/v1/\"\n});\n\ndeclare module \"axios\" {\n  export interface AxiosRequestConfig {\n    delayed?: boolean | number;\n  }\n}\n\n// type CustomAxiosRequestConfig = AxiosRequestConfig & { delayed?: boolean };\n\naxios.interceptors.request.use(config => {\n  if (config.delayed) {\n    return new Promise(resolve =>\n      setTimeout(\n        () => resolve(config),\n        config.delayed === true\n          ? 600\n          : config.delayed === false\n          ? 0\n          : config.delayed\n      )\n    );\n  }\n  return config;\n});\n\nconfigure({ axios });\n\nexport default axios;\n","import axios from \"./axios\";\n\nexport function launchTask(data: any) {\n  const transformedPayload = mapDataToExpectedPayload(data);\n  axios.post(\"task_runs/launch\", transformedPayload);\n}\n\nfunction mapDataToExpectedPayload(data: any) {\n  // We expect to receive a payload of the following format that\n  // will then transform to suit the API's expectations:\n  //\n  // {\n  //    \"blueprint\": \"name\",\n  //    \"architect\": \"name\",\n  //    \"requester\": \"name\",\n  //    \"bp|<arg-name>|<--arg-flag>\": \"value\"\n  // }\n  const transformed = Object.entries(data).map(([key, value]) => {\n    if (key === \"blueprint\") {\n      return [\n        \"blueprint_type\",\n        {\n          option_string: \"--blueprint-type\",\n          value: value\n        }\n      ];\n    } else if (key === \"architect\") {\n      return [\n        \"architect_type\",\n        {\n          option_string: \"--architect-type\",\n          value: value\n        }\n      ];\n    } else if (key === \"requester\") {\n      return [\n        \"requester_name\",\n        {\n          option_string: \"--requester-name\",\n          value: value\n        }\n      ];\n    } else {\n      const [namespace, arg_name, opt_string] = key.split(\"|\");\n      return [\n        arg_name,\n        {\n          option_string: opt_string,\n          value: value === null ? null : (value as any).toString()\n        }\n      ];\n    }\n  });\n\n  console.table(Object.fromEntries(transformed));\n  return Object.fromEntries(transformed);\n}\n","import React from \"react\";\nimport BaseWidget from \"./Base\";\nimport useAxios from \"axios-hooks\";\nimport { TaskRun, RunningTasks } from \"../models\";\nimport { task_runs__running } from \"../mocks\";\nimport {\n  Colors,\n  Icon,\n  Drawer,\n  Position,\n  Classes,\n  Card,\n  Button,\n  Intent,\n  Toaster\n} from \"@blueprintjs/core\";\nimport { createAsync, mockRequest } from \"../lib/Async\";\nimport TaskRunSummary from \"./TaskRunSummary\";\nimport BlueprintSelect from \"./components/BlueprintSelect\";\nimport ArchitectSelect from \"./components/ArchitectSelect\";\nimport RequesterSelect from \"./components/RequesterSelect\";\nimport { toaster } from \"../lib/toaster\";\nimport { launchTask } from \"../service\";\nimport OptionsForm from \"./components/OptionsForm\";\n\nconst Async = createAsync<RunningTasks>();\nconst LaunchInfoAsync = createAsync<any>();\nconst RequesterInfoAsync = createAsync<any>();\nconst DefaultTaskInfoAsync = createAsync<any>();\n\nexport default (function LaunchWidget() {\n  // const runningTasksAsync = mockRequest<RunningTasks>(task_runs__running);\n  const runningTasksAsync = useAxios({ url: \"task_runs/running\" });\n\n  return (\n    <BaseWidget badge=\"Step 2\" heading={<span>Launch it</span>}>\n      <Async\n        info={runningTasksAsync}\n        onLoading={() => (\n          <div className=\"bp3-non-ideal-state bp3-skeleton\">\n            <div\n              className=\"bp3-non-ideal-state-visual\"\n              style={{ fontSize: 20 }}\n            >\n              <span className=\"bp3-icon bp3-icon-clean\"></span>\n            </div>\n            <div>You have no tasks running.</div>\n          </div>\n        )}\n        onData={({ data }) => (\n          <div>\n            {data.task_runs.map((run: TaskRun) => (\n              <TaskRunSummary key={run.task_run_id} run={run} />\n            ))}\n          </div>\n        )}\n        checkIfEmptyFn={data => data.task_runs}\n        onEmptyData={() => (\n          <div className=\"bp3-non-ideal-state\">\n            <div\n              className=\"bp3-non-ideal-state-visual\"\n              style={{ fontSize: 20 }}\n            >\n              <span className=\"bp3-icon bp3-icon-clean\"></span>\n            </div>\n            <div>You have no tasks running.</div>\n          </div>\n        )}\n        onError={({ refetch }) => (\n          <span>\n            <Icon icon=\"warning-sign\" color={Colors.RED3} /> Something went\n            wrong.{\" \"}\n            <a onClick={() => refetch()}>\n              <strong>Try again</strong>\n            </a>\n          </span>\n        )}\n      />\n      <div>\n        <div style={{ textAlign: \"center\", marginTop: 15 }}>\n          <LaunchForm />\n        </div>\n      </div>\n    </BaseWidget>\n  );\n} as React.FC);\n\nfunction LaunchForm() {\n  const [openForm, setOpenForm] = React.useState(false);\n  const launchInfo = useAxios({ url: \"launch/options\" });\n  const requesterInfo = useAxios({\n    url: \"requesters\"\n  });\n  const defaultTaskInfo = useAxios({\n    url: \"task_runs/options\"\n  });\n\n  const [params, addToParams] = React.useReducer((state, params) => {\n    let nextState;\n    if (params === \"CLEAR_ALL\") {\n      nextState = {};\n    } else if (params === \"CLEAR_bp\") {\n      nextState = Object.keys(state)\n        .filter(key => !key.startsWith(\"bp|\"))\n        .reduce((obj: any, key: string) => {\n          obj[key] = state[key];\n          return obj;\n        }, {});\n    } else if (params === \"CLEAR_arch\") {\n      nextState = Object.keys(state)\n        .filter(key => !key.startsWith(\"arch|\"))\n        .reduce((obj: any, key: string) => {\n          obj[key] = state[key];\n          return obj;\n        }, {});\n    } else if (params === \"CLEAR_task\") {\n      nextState = Object.keys(state)\n        .filter(key => !key.startsWith(\"task|\"))\n        .reduce((obj: any, key: string) => {\n          obj[key] = state[key];\n          return obj;\n        }, {});\n    } else {\n      nextState = { ...state, ...params };\n    }\n    return nextState;\n  }, {});\n\n  return (\n    <div>\n      <button className=\"bp3-button\" onClick={() => setOpenForm(true)}>\n        [TODO] Launch a task\n      </button>\n      <Drawer\n        icon=\"people\"\n        onClose={() => setOpenForm(false)}\n        title=\"Launch a task\"\n        autoFocus={true}\n        canEscapeKeyClose={false}\n        canOutsideClickClose={false}\n        enforceFocus={true}\n        hasBackdrop={true}\n        isOpen={openForm}\n        position={Position.RIGHT}\n        size={\"50%\"}\n        usePortal={true}\n      >\n        <div\n          className={Classes.DRAWER_BODY}\n          style={{ backgroundColor: Colors.LIGHT_GRAY4 }}\n        >\n          <div className={Classes.DIALOG_BODY}>\n            <h2>Step 1. Choose a Task Blueprint</h2>\n            <p className=\"bp3-text-muted\">\n              A blueprint defines the task that will be run &amp; its associated\n              configuration parameters.\n            </p>\n            <LaunchInfoAsync\n              info={launchInfo}\n              onLoading={() => <span>Loading...</span>}\n              onData={({ data }) => (\n                <div>\n                  <BlueprintSelect\n                    data={data.blueprint_types}\n                    onUpdate={(data: any) => addToParams(data)}\n                  />\n                </div>\n              )}\n              onError={() => <span>Error</span>}\n            />\n\n            <h2>Step 2. Choose an Architect</h2>\n            <p className=\"bp3-text-muted\">\n              An architect manages the deployment target of your task.\n            </p>\n            <LaunchInfoAsync\n              info={launchInfo}\n              onLoading={() => <span>Loading...</span>}\n              onData={({ data }) => (\n                <div>\n                  <ArchitectSelect\n                    data={data.architect_types}\n                    onUpdate={(data: any) => {\n                      addToParams(data);\n                    }}\n                  />\n                </div>\n              )}\n              onError={() => <span>Error</span>}\n            />\n            <h2>Step 3. Choose a Requester</h2>\n            <p className=\"bp3-text-muted\">\n              A requester is the service account that will run your task.\n            </p>\n            <RequesterInfoAsync\n              info={requesterInfo}\n              onLoading={() => <span>Loading...</span>}\n              onData={({ data }) => (\n                <div>\n                  {/* {JSON.stringify(\n                    data.requesters.filter((r: any) => r.registered)\n                  )} */}\n                  <RequesterSelect\n                    data={data.requesters.filter((r: any) => r.registered)}\n                    onUpdate={(data: any) => {\n                      addToParams(data);\n                    }}\n                  />\n                </div>\n              )}\n              onError={() => <span>Error</span>}\n            />\n            <h2>Step 4. Final Task Options</h2>\n            <DefaultTaskInfoAsync\n              info={defaultTaskInfo}\n              onLoading={() => <span>Loading...</span>}\n              onData={({ data }) => (\n                <div>\n                  <OptionsForm\n                    prefix=\"task\"\n                    options={data.options}\n                    onUpdate={(data: any) => addToParams(data)}\n                  />\n                </div>\n              )}\n              onError={() => <span>Error</span>}\n            />\n\n            <Button\n              onClick={() => {\n                const validated =\n                  params.blueprint !== undefined &&\n                  params.architect !== undefined &&\n                  params.requester !== undefined;\n\n                if (validated) {\n                  addToParams(\"CLEAR_ALL\");\n\n                  launchTask(params);\n\n                  setOpenForm(false);\n                  toaster.show({\n                    message: \"Launching task...\",\n                    icon: \"cloud-upload\",\n                    intent: Intent.NONE,\n                    timeout: 2000\n                  });\n\n                  toaster.show({\n                    message: JSON.stringify(params),\n                    icon: \"cloud-upload\",\n                    intent: Intent.NONE,\n                    timeout: 6000\n                  });\n\n                  // TODO: Make request to /launch_task_run with `params`\n                  // Use axios?\n\n                  setTimeout(\n                    () =>\n                      toaster.show({\n                        message: \"Launched!\",\n                        icon: \"cloud-upload\",\n                        intent: Intent.SUCCESS,\n                        timeout: 2000\n                      }),\n                    1000\n                  );\n                } else {\n                  toaster.show({\n                    message:\n                      \"Error: Must selected Blueprint + Architect + Requester\",\n                    icon: \"cloud-upload\",\n                    intent: Intent.DANGER,\n                    timeout: 2000\n                  });\n                }\n              }}\n              large\n              icon=\"cloud-upload\"\n              intent={Intent.SUCCESS}\n              style={{ margin: \"20px auto 0\" }}\n            >\n              Launch\n            </Button>\n          </div>\n        </div>\n      </Drawer>\n    </div>\n  );\n}\n","import React from \"react\";\nimport BaseWidget from \"./Base\";\nimport useAxios from \"axios-hooks\";\nimport { createAsync, mockRequest } from \"../lib/Async\";\nimport { Icon, Colors } from \"@blueprintjs/core\";\nimport { ReviewableTasks } from \"../models\";\n\nconst Async = createAsync<ReviewableTasks>();\n\nexport default (function ReviewWidget() {\n  const reviewAsync = useAxios({\n    url: \"task_runs/reviewable\"\n  });\n\n  return (\n    <BaseWidget badge=\"Step 3\" heading={<span>Review it</span>}>\n      <Async\n        info={reviewAsync}\n        onLoading={() => (\n          <div className=\"bp3-skeleton\">\n            <div className=\"bp3-non-ideal-state\">\n              <div\n                className=\"bp3-non-ideal-state-visual\"\n                style={{ fontSize: 20 }}\n              >\n                <span className=\"bp3-icon bp3-icon-inbox-search\"></span>\n              </div>\n              <div>You have no work to review.</div>\n            </div>\n          </div>\n        )}\n        onError={({ refetch }) => (\n          <span>\n            <Icon icon=\"warning-sign\" color={Colors.RED3} /> Something went\n            wrong.{\" \"}\n            <a onClick={() => refetch()}>\n              <strong>Try again</strong>\n            </a>\n          </span>\n        )}\n        onData={({ data }) => <span>{JSON.stringify(data)}</span>}\n        checkIfEmptyFn={data => data.task_runs}\n        onEmptyData={() => (\n          <div>\n            <div className=\"bp3-non-ideal-state\">\n              <div\n                className=\"bp3-non-ideal-state-visual\"\n                style={{ fontSize: 20 }}\n              >\n                <span className=\"bp3-icon bp3-icon-inbox-search\"></span>\n              </div>\n              <div>You have no work to review.</div>\n            </div>\n          </div>\n        )}\n      />\n    </BaseWidget>\n  );\n} as React.FC);\n","import React from \"react\";\nimport \"./App.css\";\nimport PrepareWidget from \"./widgets/Prepare\";\nimport LaunchWidget from \"./widgets/Launch\";\nimport ReviewWidget from \"./widgets/Review\";\n\nconst App: React.FC = () => {\n  return (\n    <div className=\"App\">\n      <div className=\"above-the-fold\"></div>\n      <header>\n        <h1 className=\"bp3-heading\">mephisto</h1>\n        <em\n          className=\"bp3-italics bp3-text-large bp3-text-disabled\"\n          style={{ position: \"relative\", top: -8 }}\n        >\n          crowdsourcing without the tears\n        </em>\n      </header>\n      <div className=\"container\">\n        <PrepareWidget />\n        <LaunchWidget />\n        <ReviewWidget />\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\n\nimport \"./axios\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}