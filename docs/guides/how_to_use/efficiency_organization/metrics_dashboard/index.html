<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guides/how_to_use/efficiency_organization/metrics_dashboard">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">View task health and status with Mephisto Metrics | Mephisto</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mephisto.ai/docs/guides/how_to_use/efficiency_organization/metrics_dashboard/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="View task health and status with Mephisto Metrics | Mephisto"><meta data-rh="true" name="description" content="Mephisto provides an optional extension to view task health metrics via dashboard using Prometheus and Grafana. This lets you see the progress of your task with the following:"><meta data-rh="true" property="og:description" content="Mephisto provides an optional extension to view task health metrics via dashboard using Prometheus and Grafana. This lets you see the progress of your task with the following:"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://mephisto.ai/docs/guides/how_to_use/efficiency_organization/metrics_dashboard/"><link data-rh="true" rel="alternate" href="https://mephisto.ai/docs/guides/how_to_use/efficiency_organization/metrics_dashboard/" hreflang="en"><link data-rh="true" rel="alternate" href="https://mephisto.ai/docs/guides/how_to_use/efficiency_organization/metrics_dashboard/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Mephisto RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Mephisto Atom Feed"><link rel="stylesheet" href="/assets/css/styles.781f3545.css">
<link rel="preload" href="/assets/js/runtime~main.dab67adf.js" as="script">
<link rel="preload" href="/assets/js/main.49d46092.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_QM7n" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Mephisto" class="themedImage_GQa0 themedImage--light_Yrkz"><img src="/img/logo_w.svg" alt="Mephisto" class="themedImage_GQa0 themedImage--dark_nmEM"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/guides/quickstart/">Guides</a><a class="navbar__item navbar__link" href="/docs/explanations/abstractions_overview/">Explanations</a><a class="navbar__item navbar__link" href="/docs/reference/overview/">Reference</a><a class="navbar__item navbar__link" href="/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebookresearch/Mephisto" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_gSDM"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_YyRW colorModeToggle_Yw_U"><button class="clean-btn toggleButton_Oi4B toggleButtonDisabled_CT2w" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_eybm"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_inPu"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_YB5Q"><div class="navbar__search searchBarContainer_id41"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Uba0 searchBarLoadingRing_d7ah"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_bzSE docsWrapper_bPbH"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_bXh9" type="button"></button><div class="docPage_BopV"><aside class="theme-doc-sidebar-container docSidebarContainer_iPOn"><div class="sidebar_TS1m"><nav class="menu thin-scrollbar menu_Lk4m"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/quickstart/">10-minute Quickstart</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/guides/tutorials/first_task/">Tutorials + Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/tutorials/first_task/">Running your first task</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/tutorials/custom_react/">Working on a custom task</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/tutorials/worker_controls/">Introducing worker controls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/tutorials/workflows/">Developing a workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/tutorials/review_app/">Reviewing task results</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/tutorials/form_composer/">Run form-based tasks</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/guides/how_to_use/task_creation/developing_frontends/">In-depth use</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/guides/how_to_use/task_creation/developing_frontends/">Creating a Task</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/guides/how_to_use/worker_experience/mephisto-worker-addons/">Worker Experience</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/guides/how_to_use/worker_quality/common_qualification_flows/">Worker Quality Control</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/guides/how_to_use/efficiency_organization/reusing_configs/">Efficiency and Organization</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/how_to_use/efficiency_organization/reusing_configs/">Use the same configs across tasks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/guides/how_to_use/efficiency_organization/metrics_dashboard/">View task health and status with Mephisto Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/how_to_use/efficiency_organization/docker/">Running Mephisto with Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/how_to_use/efficiency_organization/manual_installation/">Manually installing Mephisto</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/how_to_use/efficiency_organization/config_faq/">Common Configurations and FAQs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/guides/how_to_use/review_app/overview/">Reviewing task results</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/guides/how_to_use/form_composer/overview/">Form-based tasks</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/guides/how_to_use/js_packages/main/">JS packages</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/guides/how_to_use/providers/prolific/intro/">Providers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/docs/guides/how_to_use/data_porter/simple_usage/">Move data around</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/how_to_use/data_porter/simple_usage/">Simple usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/how_to_use/data_porter/reference/">Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/how_to_use/data_porter/custom_conflict_resolver/">Custom conflict resolver</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/guides/how_to_contribute/getting_started/">How to Contribute</a></div></li></ul></nav></div></aside><main class="docMainContainer_mPL7"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_sd1V"><div class="docItemContainer_EBpW"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_eaS5" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_LSfG"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">In-depth use</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Efficiency and Organization</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">View task health and status with Mephisto Metrics</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_HTVh theme-doc-toc-mobile tocMobile_IWaV"><button type="button" class="clean-btn tocCollapsibleButton_le5B">On this page</button></div><div class="theme-doc-markdown markdown"><h1>View task health and status with Mephisto Metrics</h1><p>Mephisto provides an optional extension to view task health metrics via dashboard using <a href="https://prometheus.io/" target="_blank" rel="noopener noreferrer">Prometheus</a> and <a href="https://grafana.com/oss/grafana/" target="_blank" rel="noopener noreferrer">Grafana</a>. This lets you see the progress of your task with the following:</p><p><img loading="lazy" src="/assets/images/metrics_base_dashboard-d1cfaf683bb345fee53ab9fa67dcaa38.png" width="1765" height="1206" class="img_TeiU"></p><p>Seem exciting? Let&#x27;s dig in!</p><p><strong>Note:</strong> Mephisto 1.0&#x27;s metrics implementation is limited to supporting just one concurrent <code>Operator</code> at a time. Attempts to launch with a second <code>Operator</code> at the same time may leave the metrics for both runs corrupted, though this shouldn&#x27;t prevent you from collecting data.</p><h2 class="anchor anchorWithStickyNavbar_NY2N" id="installation">Installation<a class="hash-link" href="#installation" title="Direct link to heading">​</a></h2><p>Installation is easy, just run the setup script:</p><div class="language-shell codeBlockContainer_VTjP theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sTZM"><pre tabindex="0" class="prism-code language-shell codeBlock_v3Hm thin-scrollbar"><code class="codeBlockLines_kq6t"><span class="token-line" style="color:#393A34"><span class="token plain">mephisto metrics </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre><div class="buttonGroup_xJ_b"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zH25" aria-hidden="true"><svg class="copyButtonIcon_mhq3" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Evuu" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This script creates a local <code>prometheus</code> and <code>grafana</code> folder in mephisto&#x27;s <code>metrics</code> directory, and populates them with default configurations for being able to view Mephisto run metrics.</p><blockquote><p>NOTE: You may see a request to install <code>curl</code>.
In some systems it may not be installed. Do this manually.
Steps may be different depending on your system.</p></blockquote><p>If you use Docker, you need to connect to its environment (applies to other metrics commands as well):</p><div class="language-shell codeBlockContainer_VTjP theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sTZM"><pre tabindex="0" class="prism-code language-shell codeBlock_v3Hm thin-scrollbar"><code class="codeBlockLines_kq6t"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> -f docker/docker-compose.dev.yml up</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token builtin class-name">exec</span><span class="token plain"> -it mephisto_dc </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mephisto metrics </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre><div class="buttonGroup_xJ_b"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zH25" aria-hidden="true"><svg class="copyButtonIcon_mhq3" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Evuu" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_NY2N" id="usage">Usage<a class="hash-link" href="#usage" title="Direct link to heading">​</a></h2><p>Once you have metrics installed, all future runs will be logging metrics by default. You can view these metrics with:</p><div class="codeBlockContainer_VTjP theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sTZM"><pre tabindex="0" class="prism-code language-text codeBlock_v3Hm thin-scrollbar"><code class="codeBlockLines_kq6t"><span class="token-line" style="color:#393A34"><span class="token plain">mephisto metrics view</span><br></span></code></pre><div class="buttonGroup_xJ_b"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zH25" aria-hidden="true"><svg class="copyButtonIcon_mhq3" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Evuu" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This script will launch a grafana server on port 3032 and give you the link to view your metrics. Following the link will take you to a login screen. By default, the username and password are both <code>admin</code>.</p><p><img loading="lazy" src="/assets/images/grafana_login-a4c0bbe49a2bc6b0877db7c0fbb5e311.png" width="1230" height="1002" class="img_TeiU"></p><p>If you&#x27;re using these metrics locally on a machine that&#x27;s not publicly accessible, you can certainly skip the step of setting up a real account.</p><p><img loading="lazy" src="/assets/images/grafana_skip_new_user-1edf9934ed043328924d5bc10e0240f3.png" width="939" height="755" class="img_TeiU"></p><p>Once you&#x27;re inside, you can restrict to the region you&#x27;re interested by dragging on a graph:</p><p><img loading="lazy" src="/assets/images/select_range-bd4af7b1c4e5b121f173037e28fc2696.png" width="1754" height="1202" class="img_TeiU"></p><p>At any time you can reset the time period with the dropdown in the top right.</p><h2 class="anchor anchorWithStickyNavbar_NY2N" id="default-dashboards">Default Dashboards<a class="hash-link" href="#default-dashboards" title="Direct link to heading">​</a></h2><p>Mephisto creates a number of useful panes for most average use cases, though you are free to extend and create your own dashboards if you&#x27;re familiar with <code>prometheus</code>&#x27;s query language. The following sections describe the main dashboards and the core insights you get from them.</p><h3 class="anchor anchorWithStickyNavbar_NY2N" id="general-health">General Health<a class="hash-link" href="#general-health" title="Direct link to heading">​</a></h3><p>The general health group contains all of the top-line metrics that are relevant for knowing what&#x27;s going on with your run:</p><p><img loading="lazy" src="/assets/images/general_health-29d9c4510822c06e2f458a02b8a82026.png" width="1754" height="1202" class="img_TeiU"></p><p>Here we can see the number of active workers, the requests per minute to Mephisto (as well as their types), the <code>AgentState</code> of all of the <code>Agent</code>s that are associated with the current task as well as the units, and the total counts of units launched. A brief summary of what each of these do:</p><ul><li><strong>P99 E2E processing by packet type:</strong> Displays the general health of requests coming into the server. These should never be exceeding a a few seconds, and would point to there being an overload on your server if so (wherein you can check the Operator Health and Network Health groups to debug!)</li><li><strong>Estimated Active Worker Count:</strong> Displays the active count of unique workers currently completing tasks. Estimated once every 15 seconds, so if a job completes within that timeframe it may not be counted.</li><li><strong>Live task agent status:</strong> Displays the current task status for all agents. Generally will progress through accepted/in_task to either complete or incomplete.</li><li><strong>Incoming requests per minute:</strong> Displays the requests that are hitting your Mephisto server. Here you may find that tasks aren&#x27;t coming in because no <code>register_agent</code> calls are being made. Or perhaps you may want to look for a spike in <code>log_error</code> if you&#x27;re having unexpected behaviors.</li><li><strong>Connecting Agent Responses:</strong> This logs the <em>response</em> that mephisto provides to an agent creation request. This may show that the workers that are connecting aren&#x27;t qualified, or that there aren&#x27;t any available units for them after running unit filtration.</li><li><strong>Live unit status:</strong> This shows the current status of all units. It may be useful to see the numbers of units that are completing correctly or expiring.</li><li><strong>Launched unit counts:</strong> This shows the number of units that have been launched thusfar of all three categories. For tasks without gold units or screening units, you&#x27;ll only see the standard units.</li></ul><h3 class="anchor anchorWithStickyNavbar_NY2N" id="operator-health">Operator Health<a class="hash-link" href="#operator-health" title="Direct link to heading">​</a></h3><p>The Operator Health group is more focused on execution and runtime for jobs that the operator is looking at. Generally this is useful for debugging what may be going on &#x27;under the hood&#x27; when unexpected behavior happens.</p><p><img loading="lazy" src="/assets/images/operator_health-c1aa079d0c217fcbb5b05d8d0acfd657.png" width="1749" height="1182" class="img_TeiU"></p><p>Here we track the threads being run for different jobs, the time it takes for tasks to complete, the database access health, operator-side processing time per packet type, and various latencies for steps in the process of assigning a unit to a connecting agent. A brief summary of what each of these do:</p><ul><li><strong>Active TaskRunner Threads:</strong> Plots the threads for every unit, onboarding, or assignment active at a given time. You may look towards this to see if there are a healthy amount of active Units running compared to the number that are currently available.</li><li><strong>Unit Completion time in seconds:</strong> Plots the completion time for every Unit. Useful for tracking time buckets that workers are submitting tasks in. You can use this to see if the average completion times are shaping up as you expect them to.</li><li><strong>P99 database response time by method:</strong> Shows the response time of the local database divided by every method being run. Generally these number should be really low, and any spikes may point to an improper configuration (database on a distributed filestore?) or other issue.</li><li><strong>P99 Processing time by packet type:</strong> Shows the time it takes for the <code>ClientIOHandler</code> to process and respond to each packet type. Should generally be stable, but you may see spikes if you have too many active concurrent connections, or if your packets contain too much data for the system to handle.</li><li><strong>get_init_data_for_agent latency:</strong> Heatmap of response time for this function. If this is high, it could point to requiring too many resources being read at assign time in order to create a task for a worker, which severely limits the number of active workers you can have connecting to a task at once.</li><li><strong>get_valid_units_for_worker latency:</strong> Heatmap of response time for getting valid units for a worker. If this is high, it points to an issue in <code>TaskRun.get_valid_units_for_worker</code>, which could point to database issues querying for what&#x27;s valid, or a delay in your <code>worker_can_do_unit</code> function. The outcome is the same as the above.</li><li><strong>filter_units_for_worker latency:</strong> Heatmap of response time for filtering units for a worker. If this is high, it points to an issue in your selected <code>Blueprint</code>&#x27;s method for fitering through with units a worker may be eligible for. The outcome is the same as the above.</li></ul><h3 class="anchor anchorWithStickyNavbar_NY2N" id="network-health">Network Health<a class="hash-link" href="#network-health" title="Direct link to heading">​</a></h3><p>The network health group is useful for isolating where in the stack there may be issues preventing workers from accessing your tasks. The first section covers latency bucketed heatmaps and p99s by packet type for each step of the client reaching the mephisto router, the mephisto router processing the message, the router sending the Mephisto host a packet, and then the Mephisto host processing that packet. Spikes in any of these would point out <em>where</em> an issue is happening if there is one.</p><p><img loading="lazy" src="/assets/images/network_health_1-876374bec2a1b4547e77f3615992db60.png" width="1751" height="1101" class="img_TeiU"></p><p>The second section covers the processing type of a few high-risk packet types over time, split by packet type.</p><p><img loading="lazy" src="/assets/images/network_health_2-aef9e739f6ba9c574d75fa38433b2396.png" width="1752" height="748" class="img_TeiU"></p><p>For this section, each of the plots can show the health of your system in a number of places:</p><ul><li><strong>Submit onboarding E2E latency:</strong> Displays the time it takes to process an onboarding submission. May spike near the start of a task, when most of the people joining and submitting are still doing onboarding tasks.</li><li><strong>Mephisto live update processing times:</strong> Tracks how long it takes for mephisto to process and respond to <code>liveUpdate</code>s in-task. This is generally the most significant bottleneck for <code>max_num_concurrent_units</code> in any task that utilizes live updates. This directly represents the delay that workers are having in response to their changes.</li><li><strong>Mephisto register agent processing times:</strong> Tracks how long it takes Mephisto to process and respond to an agent registering to join. This is the second most significant bottleneck for <code>max_num_concurrent_units</code>, especially at the start of a task, as if workers aren&#x27;t able to register they may delay each other and push the server into a failure state responding to requests that have already timed out.</li><li><strong>Mephisto unit submission processing times:</strong> Tracks how long it takes to process and write to disk the submission of a unit. Spikes here may mean that you need to be a little more cautious about how much data is being saved at a time.</li><li><strong>Mephisto agent status ping round trip:</strong> Tracks how long it takes Mephisto to get updates from the router as to who is connected. Spikes here would mean that Mephisto is unable to have up-to-date understanding of which agents are connecting, and would point to an unknown issue in the router. (Please open an issue if you see this!)</li></ul><h3 class="anchor anchorWithStickyNavbar_NY2N" id="onboarding-and-other-validation-metrics">Onboarding and Other Validation Metrics<a class="hash-link" href="#onboarding-and-other-validation-metrics" title="Direct link to heading">​</a></h3><p>Similarly to the above dashboards, these panels provide details about onboarding-specific or other validation-specific processes.</p><h2 class="anchor anchorWithStickyNavbar_NY2N" id="other-commands">Other commands<a class="hash-link" href="#other-commands" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_NY2N" id="cleanup">Cleanup<a class="hash-link" href="#cleanup" title="Direct link to heading">​</a></h3><p>If you need to shut down Prometheus and Grafana resources that may have persisted:</p><div class="language-shell codeBlockContainer_VTjP theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sTZM"><pre tabindex="0" class="prism-code language-shell codeBlock_v3Hm thin-scrollbar"><code class="codeBlockLines_kq6t"><span class="token-line" style="color:#393A34"><span class="token plain">mephisto metrics cleanup</span><br></span></code></pre><div class="buttonGroup_xJ_b"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zH25" aria-hidden="true"><svg class="copyButtonIcon_mhq3" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Evuu" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_NY2N" id="remove">Remove<a class="hash-link" href="#remove" title="Direct link to heading">​</a></h3><p>If you do not need metrics after testing anymore, you can remove all files to save space:</p><div class="language-shell codeBlockContainer_VTjP theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sTZM"><pre tabindex="0" class="prism-code language-shell codeBlock_v3Hm thin-scrollbar"><code class="codeBlockLines_kq6t"><span class="token-line" style="color:#393A34"><span class="token plain">mephisto metrics remove</span><br></span></code></pre><div class="buttonGroup_xJ_b"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zH25" aria-hidden="true"><svg class="copyButtonIcon_mhq3" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Evuu" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_NY2N" id="reinstall">Reinstall<a class="hash-link" href="#reinstall" title="Direct link to heading">​</a></h3><p>If you already had metrics installed, but they were updated in a newer Mephisto version, you can update them locally:</p><div class="language-shell codeBlockContainer_VTjP theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sTZM"><pre tabindex="0" class="prism-code language-shell codeBlock_v3Hm thin-scrollbar"><code class="codeBlockLines_kq6t"><span class="token-line" style="color:#393A34"><span class="token plain">mephisto metrics reinstall</span><br></span></code></pre><div class="buttonGroup_xJ_b"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zH25" aria-hidden="true"><svg class="copyButtonIcon_mhq3" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Evuu" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_NY2N" id="configuration">Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">​</a></h2><p>If you wish to customize host, port, user or password for Grafana, you can set the following environment variables:</p><ul><li><code>GRAFANA_HOST</code> - Host of Grafana server (Default in Docker: <code>localhost</code>)</li><li><code>GRAFANA_PORT</code> - Port of Grafana server (Default in Docker: <code>3032</code>)</li><li><code>GRAFANA_USER</code> - Name of a user to login in web client (Default in Docker: <code>admin</code>)</li><li><code>GRAFANA_PASSWORD</code> - Password of a user to login in web client (Default in Docker: <code>admin</code>)</li></ul><blockquote><p>NOTE: If you created Mephisto environment on your own, setting these variables is required.</p></blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebookresearch/Mephisto/tree/main/docs/web/docs/guides/how_to_use/efficiency_organization/metrics_dashboard.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_f_ZF" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mFhX"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/guides/how_to_use/efficiency_organization/reusing_configs/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Use the same configs across tasks</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/guides/how_to_use/efficiency_organization/docker/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Running Mephisto with Docker</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_gE0w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a></li><li><a href="#default-dashboards" class="table-of-contents__link toc-highlight">Default Dashboards</a><ul><li><a href="#general-health" class="table-of-contents__link toc-highlight">General Health</a></li><li><a href="#operator-health" class="table-of-contents__link toc-highlight">Operator Health</a></li><li><a href="#network-health" class="table-of-contents__link toc-highlight">Network Health</a></li><li><a href="#onboarding-and-other-validation-metrics" class="table-of-contents__link toc-highlight">Onboarding and Other Validation Metrics</a></li></ul></li><li><a href="#other-commands" class="table-of-contents__link toc-highlight">Other commands</a><ul><li><a href="#cleanup" class="table-of-contents__link toc-highlight">Cleanup</a></li><li><a href="#remove" class="table-of-contents__link toc-highlight">Remove</a></li><li><a href="#reinstall" class="table-of-contents__link toc-highlight">Reinstall</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/guides/quickstart/">Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/explanations/abstractions_overview/">Explanations</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/reference/overview/">Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/mephisto" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_gSDM"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebookresearch/Mephisto" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_gSDM"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_gSDM"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_gSDM"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Meta Platforms. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.dab67adf.js"></script>
<script src="/assets/js/main.49d46092.js"></script>
</body>
</html>