"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[7175],{4127:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return h}});var r=n(1987);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=r.createContext({}),u=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},s=function(e){var t=u(e.components);return r.createElement(p.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),c=u(n),m=i,h=c["".concat(p,".").concat(m)]||c[m]||d[m]||o;return n?r.createElement(h,a(a({ref:t},s),{},{components:n})):r.createElement(h,a({ref:t},s))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[c]="string"==typeof e?e:i,a[1]=l;for(var u=2;u<o;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6283:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return p},default:function(){return m},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return c}});var r=n(9375),i=n(8933),o=(n(1987),n(4127)),a=["components"],l={sidebar_position:2},p="Run TaskReview app",u={unversionedId:"guides/how_to_use/review_app/running",id:"guides/how_to_use/review_app/running",title:"Run TaskReview app",description:"Run with Docker",source:"@site/docs/guides/how_to_use/review_app/running.md",sourceDirName:"guides/how_to_use/review_app",slug:"/guides/how_to_use/review_app/running",permalink:"/docs/guides/how_to_use/review_app/running",draft:!1,editUrl:"https://github.com/facebookresearch/Mephisto/tree/main/docs/web/docs/guides/how_to_use/review_app/running.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"guides",previous:{title:"Overview",permalink:"/docs/guides/how_to_use/review_app/overview"},next:{title:"Enable unit preview in TaskReview app",permalink:"/docs/guides/how_to_use/review_app/enabling_original_unit_preview"}},s={},c=[{value:"Run with Docker",id:"run-with-docker",level:2},{value:"Single-step launch",id:"single-step-launch",level:3},{value:"Multi-step launch",id:"multi-step-launch",level:3}],d={toc:c};function m(e){var t=e.components,n=(0,i.Z)(e,a);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"run-taskreview-app"},"Run TaskReview app"),(0,o.kt)("h2",{id:"run-with-docker"},"Run with Docker"),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"single-step-launch"},"Single-step launch"),(0,o.kt)("p",null,"This is the simplest way to launch TaskReview app. In repo root run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker-compose -f docker/docker-compose.dev.yml run \\\n    --build \\\n    --publish 8081:8000 \\\n    --rm mephisto_dc \\\n    mephisto review_app --host 0.0.0.0 --port 8000 --debug --force-rebuild --skip-build\n")),(0,o.kt)("p",null,"where"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"--build")," - builds image before starting container"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"--publish 8081:8000")," - maps docker ports, with ",(0,o.kt)("inlineCode",{parentName:"li"},"8000")," being same port as in ",(0,o.kt)("inlineCode",{parentName:"li"},"-p")," option"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"--rm")," - automatically removes the previous container if it already exits"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"mephisto_dc")," - container name in ",(0,o.kt)("inlineCode",{parentName:"li"},"docker-compose.dev.yml")," file"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"mephisto review_app --host 0.0.0.0 --port 8000 --debug")," - launches Mephisto's TaskReview app service inside the container")),(0,o.kt)("p",null,"Command ",(0,o.kt)("inlineCode",{parentName:"p"},"mephisto review_app")," supports the following options:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-h/--host")," - host where TaskReview app will be served"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-p/--port")," - port where TaskReview app will be served"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-d/--debug")," - run in debug mode (with extra logging)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-f/--force-rebuild")," - force rebuild React bundle (use if your Task client code has been updated)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-s/--skip-build")," - skip all installation and building steps for the UI, and directly launch the server (use if no code has been changed)")),(0,o.kt)("p",null,"Now you can access TaskReview app in your browser at ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:8081"},"http://localhost:8081"),"."),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"multi-step-launch"},"Multi-step launch"),(0,o.kt)("p",null,"TaskReview app consists of the server and client parts. If during development you wish to run them in separate steps:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"In repo root, launch containers: ",(0,o.kt)("inlineCode",{parentName:"li"},"docker-compose -f docker/docker-compose.dev.yml up")),(0,o.kt)("li",{parentName:"ol"},"SSH into running container to run server: ",(0,o.kt)("inlineCode",{parentName:"li"},"docker exec -it mephisto_dc bash")),(0,o.kt)("li",{parentName:"ol"},"Inside the container run server: ",(0,o.kt)("inlineCode",{parentName:"li"},"cd /mephisto && mephisto review_app --host 0.0.0.0 --port 8000 --debug --skip-build")),(0,o.kt)("li",{parentName:"ol"},"SSH into running container to run client: ",(0,o.kt)("inlineCode",{parentName:"li"},"docker exec -it mephisto_dc bash")),(0,o.kt)("li",{parentName:"ol"},"Inside the container run client: ",(0,o.kt)("inlineCode",{parentName:"li"},"cd /mephisto/mephisto/review_app/client/ && REACT_APP__API_URL=http://localhost:8081 PORT=3000 npm start")),(0,o.kt)("li",{parentName:"ol"},"Open TaskReview app in your browser at (http://localhost:3001)](http://localhost:3001).")))}m.isMDXComponent=!0}}]);